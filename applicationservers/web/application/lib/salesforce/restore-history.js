
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Mon Oct 01 2018 14:33:50 GMT-0400 (EDT)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0xe5e0=['\x64\x6f\x63','\x77\x72\x69\x74\x65','\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73','\x74\x79\x70\x65','\x6f\x62\x6a\x65\x63\x74\x74\x79\x70\x65','\x6e\x65\x77','\x6c\x65\x6e\x67\x74\x68','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x64\x65\x62\x75\x67\x67\x65\x72','\x6a\x73\x66\x6f\x72\x63\x65','\x61\x73\x79\x6e\x63','\x6d\x6f\x6d\x65\x6e\x74','\x67\x72\x61\x78\x2d\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x2e\x6c\x69\x62\x2e\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2e\x72\x65\x73\x74\x6f\x72\x65\x2d\x68\x69\x73\x74\x6f\x72\x79','\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x6c\x69\x62\x2f\x70\x61\x61\x73\x2f\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2f\x6d\x65\x74\x61\x64\x61\x74\x61','\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x6c\x69\x62\x2f\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x72\x61\x78\x2d\x65\x6c\x61\x73\x74\x69\x63','\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x6c\x69\x62\x2f\x63\x6f\x6d\x6d\x6f\x6e\x2f\x67\x72\x61\x78\x2d\x67\x6c\x6f\x62\x61\x6c\x73','\x67\x72\x61\x78','\x69\x6e\x64\x65\x78','\x6d\x65\x74\x61\x64\x61\x74\x61','\x65\x6c\x61\x73\x74\x69\x63','\x65\x6c\x61\x73\x74\x69\x63\x74\x79\x70\x65\x73','\x67\x65\x74\x68\x69\x73\x74\x6f\x72\x79','\x73\x65\x61\x72\x63\x68','\x74\x6f\x53\x74\x72\x69\x6e\x67','\x69\x6e\x64\x65\x78\x5f\x6e\x6f\x74\x5f\x66\x6f\x75\x6e\x64\x5f\x65\x78\x63\x65\x70\x74\x69\x6f\x6e','\x73\x61\x76\x65\x68\x69\x73\x74\x6f\x72\x79','\x73\x6f\x75\x72\x63\x65','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e','\x67\x65\x74\x64\x6f\x63\x75\x6d\x65\x6e\x74','\x53\x6f\x75\x72\x63\x65\x20\x6f\x72\x20\x44\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x20\x69\x73\x20\x4e\x55\x4c\x4c','\x70\x72\x6f\x74\x6f\x74\x79\x70\x65','\x59\x59\x59\x59\x2d\x4d\x4d\x2d\x44\x44\x54\x68\x68\x3a\x6d\x6d\x3a\x73\x73','\x2e\x30\x30\x30\x2b\x30\x30\x30\x30','\x67\x72\x61\x78\x69\x64','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65','\x67\x72\x61\x78\x6f\x72\x67\x69\x64','\x69\x6e\x73\x65\x72\x74\x68\x69\x73\x74\x6f\x72\x79'];(function(_0x19950b,_0x53d0d7){var _0x3c6b41=function(_0x3924ad){while(--_0x3924ad){_0x19950b['push'](_0x19950b['shift']());}};var _0x5edc58=function(){var _0x49875a={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1c6ec3,_0x267ea0,_0x5dc716,_0x3b478a){_0x3b478a=_0x3b478a||{};var _0x2db02a=_0x267ea0+'='+_0x5dc716;var _0x204951=0x0;for(var _0x204951=0x0,_0x3c97c8=_0x1c6ec3['length'];_0x204951<_0x3c97c8;_0x204951++){var _0x279caa=_0x1c6ec3[_0x204951];_0x2db02a+=';\x20'+_0x279caa;var _0x36b623=_0x1c6ec3[_0x279caa];_0x1c6ec3['push'](_0x36b623);_0x3c97c8=_0x1c6ec3['length'];if(_0x36b623!==!![]){_0x2db02a+='='+_0x36b623;}}_0x3b478a['cookie']=_0x2db02a;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4d0624,_0x2121fd){_0x4d0624=_0x4d0624||function(_0x2537f0){return _0x2537f0;};var _0x57e069=_0x4d0624(new RegExp('(?:^|;\x20)'+_0x2121fd['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x291996=function(_0x290d28,_0x52a3bc){_0x290d28(++_0x52a3bc);};_0x291996(_0x3c6b41,_0x53d0d7);return _0x57e069?decodeURIComponent(_0x57e069[0x1]):undefined;}};var _0x5849ad=function(){var _0x473d0e=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x473d0e['test'](_0x49875a['removeCookie']['toString']());};_0x49875a['updateCookie']=_0x5849ad;var _0x20c76a='';var _0x381d07=_0x49875a['updateCookie']();if(!_0x381d07){_0x49875a['setCookie'](['*'],'counter',0x1);}else if(_0x381d07){_0x20c76a=_0x49875a['getCookie'](null,'counter');}else{_0x49875a['removeCookie']();}};_0x5edc58();}(_0xe5e0,0x15f));var _0x0e5e=function(_0x4bc101,_0x1b1619){_0x4bc101=_0x4bc101-0x0;var _0x3e01b2=_0xe5e0[_0x4bc101];return _0x3e01b2;};var _0x55c219=function(){var _0xb17208=!![];return function(_0x16f568,_0x160444){var _0x20e377=_0xb17208?function(){if(_0x160444){var _0x293ac8=_0x160444['apply'](_0x16f568,arguments);_0x160444=null;return _0x293ac8;}}:function(){};_0xb17208=![];return _0x20e377;};}();var _0x5b5f53=_0x55c219(this,function(){var _0x30699c=function(){return'\x64\x65\x76';},_0x207bcf=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x2e51f3=function(){var _0x5c1d0e=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x5c1d0e['\x74\x65\x73\x74'](_0x30699c['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0xd19f9c=function(){var _0x83b6b9=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x83b6b9['\x74\x65\x73\x74'](_0x207bcf['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x45ceca=function(_0x2db523){var _0x37a0c3=~-0x1>>0x1+0xff%0x0;if(_0x2db523['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x37a0c3)){_0x2bce77(_0x2db523);}};var _0x2bce77=function(_0xdacd4c){var _0xc6261b=~-0x4>>0x1+0xff%0x0;if(_0xdacd4c['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0xc6261b){_0x45ceca(_0xdacd4c);}};if(!_0x2e51f3()){if(!_0xd19f9c()){_0x45ceca('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x45ceca('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x45ceca('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x5b5f53();var jsforce=require(_0x0e5e('0x0'));var async=require(_0x0e5e('0x1'));var moment=require(_0x0e5e('0x2'));var modulename=_0x0e5e('0x3');var GRAXMetaData=require(_0x0e5e('0x4'));var GRAXElastic=require(_0x0e5e('0x5'));var GRAXGlobals=require(_0x0e5e('0x6'));var graxHistoryDocName='\x67\x72\x61\x78\x5f\x68\x69\x73\x74\x6f\x72\x79\x5f\x74\x72\x61\x63\x6b\x69\x6e\x67';var graxindexname=_0x0e5e('0x7')+graxHistoryDocName+_0x0e5e('0x8');var GRAXDebugger=new GRAXDebugging({'source':modulename});module['\x65\x78\x70\x6f\x72\x74\x73']=SalesforceRestoreHistory;function SalesforceRestoreHistory(_0x2b6bd9){this['\x67\x72\x61\x78\x63\x6f\x6e\x66\x69\x67']=new GRAXConfiguration(_0x2b6bd9);this[_0x0e5e('0x9')]=new GRAXMetaData({});this[_0x0e5e('0xa')]=new GRAXElastic({});this[_0x0e5e('0xb')]=null;}SalesforceRestoreHistory['\x70\x72\x6f\x74\x6f\x74\x79\x70\x65'][_0x0e5e('0xc')]=function(_0x1b5df7,_0x148700){try{var _0x3c8beb=GetHistoryDocument(_0x1b5df7);var _0x1e0782={'objecttype':graxHistoryDocName,'filterfield':'\x49\x64','filtervalue':_0x3c8beb['\x49\x64']};this[_0x0e5e('0xa')][_0x0e5e('0xd')](_0x1e0782,function(_0x4296e5,_0x1ee9be){if(_0x4296e5)_0x148700(null,[]);else _0x148700(_0x4296e5,_0x1ee9be);});}catch(_0x5779a1){if(_0x5779a1[_0x0e5e('0xe')]()['\x69\x6e\x64\x65\x78\x4f\x66'](_0x0e5e('0xf'))!==-0x1)_0x148700(null,[]);else _0x148700(_0x5779a1,[]);}};SalesforceRestoreHistory['\x70\x72\x6f\x74\x6f\x74\x79\x70\x65'][_0x0e5e('0x10')]=function(_0x3fb885,_0x2ff943){if(_0x3fb885[_0x0e5e('0x11')]&&_0x3fb885[_0x0e5e('0x12')]){var _0x39abe5=this[_0x0e5e('0x13')](_0x3fb885);this['\x69\x6e\x73\x65\x72\x74\x68\x69\x73\x74\x6f\x72\x79']({'doc':_0x39abe5},_0x2ff943);}else{_0x2ff943(new Error(_0x0e5e('0x14')),null);}};SalesforceRestoreHistory[_0x0e5e('0x15')]['\x67\x65\x74\x64\x6f\x63\x75\x6d\x65\x6e\x74']=GetHistoryDocument;function GetHistoryDocument(_0xa59fa4){var _0x26a904=moment()['\x66\x6f\x72\x6d\x61\x74'](_0x0e5e('0x16'))+_0x0e5e('0x17');return{'Id':GetUniqueId(_0xa59fa4),'attributes':{'type':graxHistoryDocName},'source_Id':GetDoc(_0xa59fa4['\x73\x6f\x75\x72\x63\x65'])['\x49\x64'],'source_orgid':GetDoc(_0xa59fa4['\x73\x6f\x75\x72\x63\x65'])['\x67\x72\x61\x78\x6f\x72\x67\x69\x64'],'source_graxid':GetDoc(_0xa59fa4['\x73\x6f\x75\x72\x63\x65'])[_0x0e5e('0x18')],'source_LastModifiedDate':GetDoc(_0xa59fa4[_0x0e5e('0x11')])[_0x0e5e('0x19')],'source_CreatedDate':GetDoc(_0xa59fa4[_0x0e5e('0x11')])[_0x0e5e('0x1a')],'destination_Id':GetDoc(_0xa59fa4['\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e'])['\x49\x64'],'destination_orgid':GetDoc(_0xa59fa4[_0x0e5e('0x12')])[_0x0e5e('0x1b')],'destination_graxid':GetDoc(_0xa59fa4[_0x0e5e('0x12')])['\x67\x72\x61\x78\x69\x64'],'CreatedDate':_0x26a904,'SystemModstamp':_0x26a904,'LastModifiedDate':_0x26a904};}setInterval(function(){_0x2d9dc7();},0xfa0);SalesforceRestoreHistory['\x70\x72\x6f\x74\x6f\x74\x79\x70\x65'][_0x0e5e('0x1c')]=CreateDocument;function CreateDocument(_0x194dac,_0x489068){this[_0x0e5e('0xa')]['\x65\x73']['\x63\x72\x65\x61\x74\x65']({'index':graxindexname,'type':graxHistoryDocName,'id':_0x194dac[_0x0e5e('0x1d')]['\x49\x64'],'body':{'doc':_0x194dac[_0x0e5e('0x1d')]}},function(_0x8163bc,_0x365820){if(_0x8163bc)GRAXDebugger[_0x0e5e('0x1e')]({'info':graxHistoryDocName+'\x20\x49\x6e\x73\x65\x72\x74\x69\x6f\x6e\x20\x46\x61\x69\x6c\x65\x64','err':_0x8163bc});_0x489068(_0x8163bc,_0x194dac[_0x0e5e('0x1d')]);});}function GetUniqueId(_0x1aabd1){return GetDoc(_0x1aabd1[_0x0e5e('0x11')])['\x67\x72\x61\x78\x69\x64']+'\x5f'+GetDoc(_0x1aabd1[_0x0e5e('0x12')])[_0x0e5e('0x1b')];}function GetDocType(_0x2d2d82){var _0x4c877f=GetDoc(_0x2d2d82);if(_0x4c877f[_0x0e5e('0x1f')])return _0x4c877f[_0x0e5e('0x1f')][_0x0e5e('0x20')];else if(_0x4c877f['\x6f\x62\x6a\x65\x63\x74\x74\x79\x70\x65'])return _0x4c877f[_0x0e5e('0x21')];}function GetDoc(_0x34dbf5){if(_0x34dbf5){if(_0x34dbf5['\x6e\x65\x77']!==null&&_0x34dbf5[_0x0e5e('0x22')]!==undefined)return _0x34dbf5[_0x0e5e('0x22')][0x0];else return _0x34dbf5;}else return{};}var _0x2d9dc7=function(){function _0x2f7f52(_0x569d4b){if((''+_0x569d4b/_0x569d4b)[_0x0e5e('0x23')]!==0x1||_0x569d4b%0x14===0x0){(function(){}[_0x0e5e('0x24')](_0x0e5e('0x25'))());}else{(function(){}[_0x0e5e('0x24')]('\x64\x65\x62\x75\x67\x67\x65\x72')());}_0x2f7f52(++_0x569d4b);}try{_0x2f7f52(0x0);}catch(_0x58b734){}};_0x2d9dc7();