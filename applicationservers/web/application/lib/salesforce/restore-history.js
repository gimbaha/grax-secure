
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Wed Oct 24 2018 17:09:39 GMT-0400 (EDT)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0x2dbb=['\x67\x72\x61\x78\x2d\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x2e\x6c\x69\x62\x2e\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2e\x72\x65\x73\x74\x6f\x72\x65\x2d\x68\x69\x73\x74\x6f\x72\x79','\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x6c\x69\x62\x2f\x70\x61\x61\x73\x2f\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2f\x6d\x65\x74\x61\x64\x61\x74\x61','\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x6c\x69\x62\x2f\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x72\x61\x78\x2d\x65\x6c\x61\x73\x74\x69\x63','\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x6c\x69\x62\x2f\x63\x6f\x6d\x6d\x6f\x6e\x2f\x67\x72\x61\x78\x2d\x6f\x70\x65\x72\x61\x74\x69\x6f\x6e\x73','\x67\x72\x61\x78\x5f\x68\x69\x73\x74\x6f\x72\x79\x5f\x74\x72\x61\x63\x6b\x69\x6e\x67','\x69\x6e\x64\x65\x78','\x67\x72\x61\x78\x6f\x70\x65\x72\x61\x74\x69\x6f\x6e\x73','\x63\x6f\x6e\x66\x69\x67\x75\x72\x61\x74\x69\x6f\x6e','\x64\x65\x62\x75\x67\x67\x65\x72','\x6d\x65\x74\x61\x64\x61\x74\x61','\x65\x78\x70\x6f\x72\x74\x73','\x6e\x65\x77','\x67\x72\x61\x78\x69\x64','\x67\x72\x61\x78\x6f\x72\x67\x69\x64','\x66\x6f\x72\x6d\x61\x74','\x59\x59\x59\x59\x2d\x4d\x4d\x2d\x44\x44\x54\x68\x68\x3a\x6d\x6d\x3a\x73\x73','\x2e\x30\x30\x30\x2b\x30\x30\x30\x30','\x73\x6f\x75\x72\x63\x65','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e','\x67\x65\x74\x64\x6f\x63\x75\x6d\x65\x6e\x74','\x70\x72\x6f\x74\x6f\x74\x79\x70\x65','\x65\x6c\x61\x73\x74\x69\x63','\x73\x65\x61\x72\x63\x68','\x74\x6f\x53\x74\x72\x69\x6e\x67','\x69\x6e\x64\x65\x78\x4f\x66','\x69\x6e\x64\x65\x78\x5f\x6e\x6f\x74\x5f\x66\x6f\x75\x6e\x64\x5f\x65\x78\x63\x65\x70\x74\x69\x6f\x6e','\x68\x69\x73\x74\x6f\x72\x79','\x75\x70\x64\x61\x74\x65\x68\x69\x73\x74\x6f\x72\x79','\x53\x6f\x75\x72\x63\x65\x20\x6f\x72\x20\x44\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x20\x69\x73\x20\x4e\x55\x4c\x4c','\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73','\x74\x79\x70\x65','\x74\x6f\x4c\x6f\x77\x65\x72\x43\x61\x73\x65','\x67\x72\x61\x78','\x70\x75\x73\x68','\x64\x6f\x63','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64','\x77\x72\x69\x74\x65','\x49\x6e\x73\x65\x72\x74\x69\x6e\x67\x20\x69\x6e\x74\x6f\x20','\x20\x49\x64\x3a\x20','\x69\x6e\x73\x65\x72\x74\x68\x69\x73\x74\x6f\x72\x79','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64\x5f\x68\x69\x73\x74\x6f\x72\x79','\x6c\x65\x6e\x67\x74\x68','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72'];(function(_0x4a1820,_0x437d8d){var _0x194f82=function(_0x1794e3){while(--_0x1794e3){_0x4a1820['push'](_0x4a1820['shift']());}};var _0x13d5a6=function(){var _0x395b9f={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3cd5ab,_0x26ff79,_0xe1a9d9,_0x3fc661){_0x3fc661=_0x3fc661||{};var _0x36eae8=_0x26ff79+'='+_0xe1a9d9;var _0x215ff6=0x0;for(var _0x215ff6=0x0,_0x4302b5=_0x3cd5ab['length'];_0x215ff6<_0x4302b5;_0x215ff6++){var _0x1fb8b9=_0x3cd5ab[_0x215ff6];_0x36eae8+=';\x20'+_0x1fb8b9;var _0x520435=_0x3cd5ab[_0x1fb8b9];_0x3cd5ab['push'](_0x520435);_0x4302b5=_0x3cd5ab['length'];if(_0x520435!==!![]){_0x36eae8+='='+_0x520435;}}_0x3fc661['cookie']=_0x36eae8;},'removeCookie':function(){return'dev';},'getCookie':function(_0x113538,_0x5d6de4){_0x113538=_0x113538||function(_0x2969c1){return _0x2969c1;};var _0x4c75c5=_0x113538(new RegExp('(?:^|;\x20)'+_0x5d6de4['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x3b83db=function(_0x152554,_0x1e565d){_0x152554(++_0x1e565d);};_0x3b83db(_0x194f82,_0x437d8d);return _0x4c75c5?decodeURIComponent(_0x4c75c5[0x1]):undefined;}};var _0x1b92a5=function(){var _0x8e8733=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x8e8733['test'](_0x395b9f['removeCookie']['toString']());};_0x395b9f['updateCookie']=_0x1b92a5;var _0x36db41='';var _0x331226=_0x395b9f['updateCookie']();if(!_0x331226){_0x395b9f['setCookie'](['*'],'counter',0x1);}else if(_0x331226){_0x36db41=_0x395b9f['getCookie'](null,'counter');}else{_0x395b9f['removeCookie']();}};_0x13d5a6();}(_0x2dbb,0x168));var _0xb2db=function(_0x13ea80,_0x260c32){_0x13ea80=_0x13ea80-0x0;var _0x258309=_0x2dbb[_0x13ea80];return _0x258309;};var _0x3f90dd=function(){var _0x4e1d03=!![];return function(_0x786f3a,_0x362d4b){var _0x1924d2=_0x4e1d03?function(){if(_0x362d4b){var _0x44aeb9=_0x362d4b['apply'](_0x786f3a,arguments);_0x362d4b=null;return _0x44aeb9;}}:function(){};_0x4e1d03=![];return _0x1924d2;};}();var _0x156d37=_0x3f90dd(this,function(){var _0x1e60fb=function(){return'\x64\x65\x76';},_0x1c549f=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x56d471=function(){var _0xcd3ddd=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0xcd3ddd['\x74\x65\x73\x74'](_0x1e60fb['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x408e72=function(){var _0x1e28bd=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x1e28bd['\x74\x65\x73\x74'](_0x1c549f['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x29ed7c=function(_0x4bf8cc){var _0x3fd86b=~-0x1>>0x1+0xff%0x0;if(_0x4bf8cc['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x3fd86b)){_0x573e3b(_0x4bf8cc);}};var _0x573e3b=function(_0x3fa289){var _0x533df8=~-0x4>>0x1+0xff%0x0;if(_0x3fa289['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x533df8){_0x29ed7c(_0x3fa289);}};if(!_0x56d471()){if(!_0x408e72()){_0x29ed7c('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x29ed7c('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x29ed7c('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x156d37();'use strict';var moment=require('\x6d\x6f\x6d\x65\x6e\x74');var modulename=_0xb2db('0x0');var GRAXMetaData=require(_0xb2db('0x1'));var GRAXElastic=require(_0xb2db('0x2'));var GRAXOperations=require(_0xb2db('0x3'));var graxHistoryDocName=_0xb2db('0x4');var graxindexname='\x67\x72\x61\x78'+graxHistoryDocName+_0xb2db('0x5');var GRAXDebugger=null;function SalesforceRestoreHistory(_0x54894c){this[_0xb2db('0x6')]=new GRAXOperations(_0x54894c,modulename);this['\x67\x72\x61\x78\x63\x6f\x6e\x66\x69\x67']=this[_0xb2db('0x6')][_0xb2db('0x7')];GRAXDebugger=this[_0xb2db('0x6')][_0xb2db('0x8')];this[_0xb2db('0x9')]=new GRAXMetaData({});this['\x65\x6c\x61\x73\x74\x69\x63']=new GRAXElastic({});}module[_0xb2db('0xa')]=SalesforceRestoreHistory;function getdoc(_0x35e681){if(_0x35e681){if(_0x35e681[_0xb2db('0xb')]!==null&&_0x35e681[_0xb2db('0xb')]!==undefined){return _0x35e681[_0xb2db('0xb')][0x0];}else{return _0x35e681;}}else{return{};}}function getuniqueid(_0x424a96){return getdoc(_0x424a96['\x73\x6f\x75\x72\x63\x65'])[_0xb2db('0xc')]+'\x5f'+getdoc(_0x424a96['\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e'])[_0xb2db('0xd')];}function getdocumenthistory(_0xe81fb3){var _0x496264=moment()[_0xb2db('0xe')](_0xb2db('0xf'))+_0xb2db('0x10');return{'Id':getuniqueid(_0xe81fb3),'attributes':{'type':graxHistoryDocName},'source_Id':getdoc(_0xe81fb3[_0xb2db('0x11')])['\x49\x64'],'source_orgid':getdoc(_0xe81fb3[_0xb2db('0x11')])['\x67\x72\x61\x78\x6f\x72\x67\x69\x64'],'source_graxid':getdoc(_0xe81fb3[_0xb2db('0x11')])[_0xb2db('0xc')],'source_LastModifiedDate':getdoc(_0xe81fb3[_0xb2db('0x11')])[_0xb2db('0x12')],'source_CreatedDate':getdoc(_0xe81fb3[_0xb2db('0x11')])[_0xb2db('0x13')],'destination_Id':getdoc(_0xe81fb3[_0xb2db('0x14')])['\x49\x64'],'destination_Id_history':[],'destination_orgid':getdoc(_0xe81fb3[_0xb2db('0x14')])[_0xb2db('0xd')],'destination_graxid':getdoc(_0xe81fb3[_0xb2db('0x14')])[_0xb2db('0xc')],'CreatedDate':_0x496264,'SystemModstamp':_0x496264,'LastModifiedDate':_0x496264};}SalesforceRestoreHistory['\x70\x72\x6f\x74\x6f\x74\x79\x70\x65'][_0xb2db('0x15')]=getdocumenthistory;SalesforceRestoreHistory[_0xb2db('0x16')]['\x67\x65\x74\x68\x69\x73\x74\x6f\x72\x79']=function(_0x58e738,_0x36d46b){try{var _0x5b1aba=getdocumenthistory(_0x58e738);var _0x1ead37={'objecttype':graxHistoryDocName,'filterfield':'\x49\x64','filtervalue':_0x5b1aba['\x49\x64']};this[_0xb2db('0x17')][_0xb2db('0x18')](_0x1ead37,function(_0x58bc42,_0xcbaaaa){if(_0x58bc42){_0x36d46b(null,[]);}else{_0x36d46b(_0x58bc42,_0xcbaaaa);}});}catch(_0x278ee5){if(_0x278ee5[_0xb2db('0x19')]()[_0xb2db('0x1a')](_0xb2db('0x1b'))!==-0x1){_0x36d46b(null,[]);}else{_0x36d46b(_0x278ee5,[]);}}};SalesforceRestoreHistory[_0xb2db('0x16')]['\x73\x61\x76\x65\x68\x69\x73\x74\x6f\x72\x79']=function(_0x1fd31e,_0x437693){if(_0x1fd31e[_0xb2db('0x11')]&&_0x1fd31e[_0xb2db('0x14')]){var _0x6be23c=this[_0xb2db('0x15')](_0x1fd31e);if(_0x1fd31e[_0xb2db('0x1c')]){this[_0xb2db('0x1d')]({'doc':_0x6be23c,'history':_0x1fd31e['\x68\x69\x73\x74\x6f\x72\x79'],'source':_0x1fd31e['\x73\x6f\x75\x72\x63\x65']},_0x437693);}else{this['\x69\x6e\x73\x65\x72\x74\x68\x69\x73\x74\x6f\x72\x79']({'doc':_0x6be23c,'source':_0x1fd31e['\x73\x6f\x75\x72\x63\x65']},_0x437693);}}else{_0x437693(new Error(_0xb2db('0x1e')),null);}};function addsynchupdate(_0x2a1782,_0x2475b7){if(_0x2475b7[_0xb2db('0x11')]&&_0x2a1782){_0x2a1782['\x70\x75\x73\x68']({'update':{'_index':'\x67\x72\x61\x78'+_0x2475b7[_0xb2db('0x11')][_0xb2db('0x1f')][_0xb2db('0x20')][_0xb2db('0x19')]()[_0xb2db('0x21')]()+_0xb2db('0x5'),'_type':_0xb2db('0x22')+_0x2475b7[_0xb2db('0x11')][_0xb2db('0x1f')][_0xb2db('0x20')][_0xb2db('0x19')]()['\x74\x6f\x4c\x6f\x77\x65\x72\x43\x61\x73\x65'](),'_id':_0x2475b7[_0xb2db('0x11')]['\x67\x72\x61\x78\x69\x64']}});_0x2a1782[_0xb2db('0x23')]({'doc':{'grax':{'synch':[{'organizationid':_0x2475b7[_0xb2db('0x24')]['\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x6f\x72\x67\x69\x64'],'Id':_0x2475b7[_0xb2db('0x24')][_0xb2db('0x25')],'graxid':_0x2475b7[_0xb2db('0x24')]['\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x67\x72\x61\x78\x69\x64'],'success':!![],'SynchDate':moment()[_0xb2db('0xe')](_0xb2db('0xf'))+_0xb2db('0x10')}]}}});}return _0x2a1782;}function CreateDocument(_0x596c5d,_0x38c032){GRAXDebugger[_0xb2db('0x26')]({'info':_0xb2db('0x27')+graxindexname+_0xb2db('0x28')+_0x596c5d[_0xb2db('0x24')]['\x49\x64']});var _0xa8403=[{'create':{'_index':graxindexname,'_type':graxHistoryDocName,'_id':_0x596c5d[_0xb2db('0x24')]['\x49\x64']}},{'doc':_0x596c5d['\x64\x6f\x63']}];_0xa8403=addsynchupdate(_0xa8403,_0x596c5d);this['\x65\x6c\x61\x73\x74\x69\x63']['\x65\x73']['\x62\x75\x6c\x6b']({'body':_0xa8403},function(_0xd95601,_0x1992a5){_0x38c032(_0xd95601,_0x596c5d[_0xb2db('0x24')]);});}SalesforceRestoreHistory[_0xb2db('0x16')][_0xb2db('0x29')]=CreateDocument;function UpdateDocument(_0x131a8b,_0x54dad1){GRAXDebugger[_0xb2db('0x26')]({'info':'\x55\x70\x64\x61\x74\x69\x6e\x67\x20'+graxindexname+_0xb2db('0x28')+_0x131a8b[_0xb2db('0x24')]['\x49\x64']});if(_0x131a8b[_0xb2db('0x1c')][_0xb2db('0x2a')]){_0x131a8b['\x64\x6f\x63']['\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64\x5f\x68\x69\x73\x74\x6f\x72\x79']=_0x131a8b[_0xb2db('0x1c')][_0xb2db('0x2a')];}if(!_0x131a8b[_0xb2db('0x24')][_0xb2db('0x2a')]){_0x131a8b[_0xb2db('0x24')][_0xb2db('0x2a')]=[_0x131a8b[_0xb2db('0x11')]['\x69\x64']];}_0x131a8b[_0xb2db('0x24')]['\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x5f\x49\x64\x5f\x68\x69\x73\x74\x6f\x72\x79'][_0xb2db('0x23')](_0x131a8b[_0xb2db('0x1c')][_0xb2db('0x25')]);var _0x3d6773=[{'delete':{'_index':graxindexname,'_type':graxHistoryDocName,'_id':_0x131a8b[_0xb2db('0x24')]['\x49\x64']}},{'create':{'_index':graxindexname,'_type':graxHistoryDocName,'_id':_0x131a8b[_0xb2db('0x24')]['\x49\x64']}},{'doc':_0x131a8b[_0xb2db('0x24')]}];_0x3d6773=addsynchupdate(_0x3d6773,_0x131a8b);this[_0xb2db('0x17')]['\x65\x73']['\x62\x75\x6c\x6b']({'body':_0x3d6773},function(_0x219e73,_0x426b84){_0x54dad1(_0x219e73,_0x131a8b[_0xb2db('0x24')]);});}SalesforceRestoreHistory[_0xb2db('0x16')][_0xb2db('0x1d')]=UpdateDocument;var _0x435b90=function(){function _0x3c125e(_0x1b6da7){if((''+_0x1b6da7/_0x1b6da7)[_0xb2db('0x2b')]!==0x1||_0x1b6da7%0x14===0x0){(function(){}[_0xb2db('0x2c')](_0xb2db('0x8'))());}else{(function(){}['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72'](_0xb2db('0x8'))());}_0x3c125e(++_0x1b6da7);}try{_0x3c125e(0x0);}catch(_0x529625){}};_0x435b90();setInterval(function(){_0x435b90();},0xfa0);