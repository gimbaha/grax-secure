
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Wed Oct 10 2018 16:44:09 GMT-0400 (EDT)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0x535d=['\x2e\x30\x30\x30\x2b\x30\x30\x30\x30','\x73\x6f\x75\x72\x63\x65','\x67\x72\x61\x78\x6f\x72\x67\x69\x64','\x67\x72\x61\x78\x69\x64','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65','\x63\x72\x65\x61\x74\x65','\x64\x6f\x63','\x77\x72\x69\x74\x65','\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73','\x6f\x62\x6a\x65\x63\x74\x74\x79\x70\x65','\x6e\x65\x77','\x6c\x65\x6e\x67\x74\x68','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x64\x65\x62\x75\x67\x67\x65\x72','\x6a\x73\x66\x6f\x72\x63\x65','\x61\x73\x79\x6e\x63','\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x6c\x69\x62\x2f\x70\x61\x61\x73\x2f\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2f\x6d\x65\x74\x61\x64\x61\x74\x61','\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x6c\x69\x62\x2f\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x72\x61\x78\x2d\x65\x6c\x61\x73\x74\x69\x63','\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x2e\x2e\x2f\x6c\x69\x62\x2f\x63\x6f\x6d\x6d\x6f\x6e\x2f\x67\x72\x61\x78\x2d\x67\x6c\x6f\x62\x61\x6c\x73','\x67\x72\x61\x78\x5f\x68\x69\x73\x74\x6f\x72\x79\x5f\x74\x72\x61\x63\x6b\x69\x6e\x67','\x67\x72\x61\x78','\x69\x6e\x64\x65\x78','\x67\x72\x61\x78\x63\x6f\x6e\x66\x69\x67','\x6d\x65\x74\x61\x64\x61\x74\x61','\x65\x6c\x61\x73\x74\x69\x63\x74\x79\x70\x65\x73','\x67\x65\x74\x68\x69\x73\x74\x6f\x72\x79','\x65\x6c\x61\x73\x74\x69\x63','\x73\x65\x61\x72\x63\x68','\x74\x6f\x53\x74\x72\x69\x6e\x67','\x69\x6e\x64\x65\x78\x4f\x66','\x69\x6e\x64\x65\x78\x5f\x6e\x6f\x74\x5f\x66\x6f\x75\x6e\x64\x5f\x65\x78\x63\x65\x70\x74\x69\x6f\x6e','\x70\x72\x6f\x74\x6f\x74\x79\x70\x65','\x73\x61\x76\x65\x68\x69\x73\x74\x6f\x72\x79','\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e','\x69\x6e\x73\x65\x72\x74\x68\x69\x73\x74\x6f\x72\x79','\x53\x6f\x75\x72\x63\x65\x20\x6f\x72\x20\x44\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e\x20\x69\x73\x20\x4e\x55\x4c\x4c','\x67\x65\x74\x64\x6f\x63\x75\x6d\x65\x6e\x74','\x66\x6f\x72\x6d\x61\x74'];(function(_0x3b4f6d,_0x32605b){var _0x2ebdc2=function(_0x318510){while(--_0x318510){_0x3b4f6d['push'](_0x3b4f6d['shift']());}};var _0x5b005d=function(){var _0x5ece5c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xa316f5,_0x4f96fc,_0x1814b7,_0x4d63c3){_0x4d63c3=_0x4d63c3||{};var _0x30c889=_0x4f96fc+'='+_0x1814b7;var _0x3bb9e6=0x0;for(var _0x3bb9e6=0x0,_0x3d9131=_0xa316f5['length'];_0x3bb9e6<_0x3d9131;_0x3bb9e6++){var _0x4ca30f=_0xa316f5[_0x3bb9e6];_0x30c889+=';\x20'+_0x4ca30f;var _0x51b15b=_0xa316f5[_0x4ca30f];_0xa316f5['push'](_0x51b15b);_0x3d9131=_0xa316f5['length'];if(_0x51b15b!==!![]){_0x30c889+='='+_0x51b15b;}}_0x4d63c3['cookie']=_0x30c889;},'removeCookie':function(){return'dev';},'getCookie':function(_0x39d533,_0x34bfc8){_0x39d533=_0x39d533||function(_0x104f71){return _0x104f71;};var _0x4bbeb3=_0x39d533(new RegExp('(?:^|;\x20)'+_0x34bfc8['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x26c732=function(_0x4c8f54,_0x1f10d3){_0x4c8f54(++_0x1f10d3);};_0x26c732(_0x2ebdc2,_0x32605b);return _0x4bbeb3?decodeURIComponent(_0x4bbeb3[0x1]):undefined;}};var _0xd9410e=function(){var _0xfa7eea=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0xfa7eea['test'](_0x5ece5c['removeCookie']['toString']());};_0x5ece5c['updateCookie']=_0xd9410e;var _0x5a1a54='';var _0x1b68b3=_0x5ece5c['updateCookie']();if(!_0x1b68b3){_0x5ece5c['setCookie'](['*'],'counter',0x1);}else if(_0x1b68b3){_0x5a1a54=_0x5ece5c['getCookie'](null,'counter');}else{_0x5ece5c['removeCookie']();}};_0x5b005d();}(_0x535d,0xab));var _0xd535=function(_0x36b356,_0x2ad65d){_0x36b356=_0x36b356-0x0;var _0xa7f149=_0x535d[_0x36b356];return _0xa7f149;};var _0xdcabde=function(){var _0x36ed3c=!![];return function(_0x44a00a,_0x52a2e0){var _0x3f7af9=_0x36ed3c?function(){if(_0x52a2e0){var _0x5cdd79=_0x52a2e0['apply'](_0x44a00a,arguments);_0x52a2e0=null;return _0x5cdd79;}}:function(){};_0x36ed3c=![];return _0x3f7af9;};}();var _0x55ddd8=_0xdcabde(this,function(){var _0xcd23d7=function(){return'\x64\x65\x76';},_0x12d6ed=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x366079=function(){var _0x13efea=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x13efea['\x74\x65\x73\x74'](_0xcd23d7['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x20be0f=function(){var _0x5aba0d=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x5aba0d['\x74\x65\x73\x74'](_0x12d6ed['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x3a5e69=function(_0x4ec118){var _0x5571e3=~-0x1>>0x1+0xff%0x0;if(_0x4ec118['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x5571e3)){_0x2ea41f(_0x4ec118);}};var _0x2ea41f=function(_0x273085){var _0x264202=~-0x4>>0x1+0xff%0x0;if(_0x273085['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x264202){_0x3a5e69(_0x273085);}};if(!_0x366079()){if(!_0x20be0f()){_0x3a5e69('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x3a5e69('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x3a5e69('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x55ddd8();var jsforce=require(_0xd535('0x0'));var async=require(_0xd535('0x1'));var moment=require('\x6d\x6f\x6d\x65\x6e\x74');var modulename='\x67\x72\x61\x78\x2d\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x2e\x6c\x69\x62\x2e\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2e\x72\x65\x73\x74\x6f\x72\x65\x2d\x68\x69\x73\x74\x6f\x72\x79';var GRAXMetaData=require(_0xd535('0x2'));var GRAXElastic=require(_0xd535('0x3'));var GRAXGlobals=require(_0xd535('0x4'));var graxHistoryDocName=_0xd535('0x5');var graxindexname=_0xd535('0x6')+graxHistoryDocName+_0xd535('0x7');var GRAXDebugger=new GRAXDebugging({'source':modulename});module['\x65\x78\x70\x6f\x72\x74\x73']=SalesforceRestoreHistory;function SalesforceRestoreHistory(_0x52cbc5){this[_0xd535('0x8')]=new GRAXConfiguration(_0x52cbc5);this[_0xd535('0x9')]=new GRAXMetaData({});this['\x65\x6c\x61\x73\x74\x69\x63']=new GRAXElastic({});this[_0xd535('0xa')]=null;}SalesforceRestoreHistory['\x70\x72\x6f\x74\x6f\x74\x79\x70\x65'][_0xd535('0xb')]=function(_0x156eea,_0x39792b){try{var _0x3a6841=GetHistoryDocument(_0x156eea);var _0x4a296c={'objecttype':graxHistoryDocName,'filterfield':'\x49\x64','filtervalue':_0x3a6841['\x49\x64']};this[_0xd535('0xc')][_0xd535('0xd')](_0x4a296c,function(_0x272e8b,_0x21cba0){if(_0x272e8b)_0x39792b(null,[]);else _0x39792b(_0x272e8b,_0x21cba0);});}catch(_0x4c0692){if(_0x4c0692[_0xd535('0xe')]()[_0xd535('0xf')](_0xd535('0x10'))!==-0x1)_0x39792b(null,[]);else _0x39792b(_0x4c0692,[]);}};setInterval(function(){_0x1f80ef();},0xfa0);SalesforceRestoreHistory[_0xd535('0x11')][_0xd535('0x12')]=function(_0x3fd304,_0xdaa01d){if(_0x3fd304['\x73\x6f\x75\x72\x63\x65']&&_0x3fd304[_0xd535('0x13')]){var _0x52f768=this['\x67\x65\x74\x64\x6f\x63\x75\x6d\x65\x6e\x74'](_0x3fd304);this[_0xd535('0x14')]({'doc':_0x52f768},_0xdaa01d);}else{_0xdaa01d(new Error(_0xd535('0x15')),null);}};SalesforceRestoreHistory['\x70\x72\x6f\x74\x6f\x74\x79\x70\x65'][_0xd535('0x16')]=GetHistoryDocument;function GetHistoryDocument(_0x338042){var _0x29e478=moment()[_0xd535('0x17')]('\x59\x59\x59\x59\x2d\x4d\x4d\x2d\x44\x44\x54\x68\x68\x3a\x6d\x6d\x3a\x73\x73')+_0xd535('0x18');return{'Id':GetUniqueId(_0x338042),'attributes':{'type':graxHistoryDocName},'source_Id':GetDoc(_0x338042[_0xd535('0x19')])['\x49\x64'],'source_orgid':GetDoc(_0x338042[_0xd535('0x19')])[_0xd535('0x1a')],'source_graxid':GetDoc(_0x338042['\x73\x6f\x75\x72\x63\x65'])[_0xd535('0x1b')],'source_LastModifiedDate':GetDoc(_0x338042['\x73\x6f\x75\x72\x63\x65'])[_0xd535('0x1c')],'source_CreatedDate':GetDoc(_0x338042['\x73\x6f\x75\x72\x63\x65'])[_0xd535('0x1d')],'destination_Id':GetDoc(_0x338042['\x64\x65\x73\x74\x69\x6e\x61\x74\x69\x6f\x6e'])['\x49\x64'],'destination_orgid':GetDoc(_0x338042[_0xd535('0x13')])[_0xd535('0x1a')],'destination_graxid':GetDoc(_0x338042[_0xd535('0x13')])[_0xd535('0x1b')],'CreatedDate':_0x29e478,'SystemModstamp':_0x29e478,'LastModifiedDate':_0x29e478};}SalesforceRestoreHistory['\x70\x72\x6f\x74\x6f\x74\x79\x70\x65']['\x69\x6e\x73\x65\x72\x74\x68\x69\x73\x74\x6f\x72\x79']=CreateDocument;function CreateDocument(_0x185966,_0x48d774){this['\x65\x6c\x61\x73\x74\x69\x63']['\x65\x73'][_0xd535('0x1e')]({'index':graxindexname,'type':graxHistoryDocName,'id':_0x185966[_0xd535('0x1f')]['\x49\x64'],'body':{'doc':_0x185966[_0xd535('0x1f')]}},function(_0x11187d,_0x3cad49){if(_0x11187d)GRAXDebugger[_0xd535('0x20')]({'info':graxHistoryDocName+'\x20\x49\x6e\x73\x65\x72\x74\x69\x6f\x6e\x20\x46\x61\x69\x6c\x65\x64','err':_0x11187d});_0x48d774(_0x11187d,_0x185966[_0xd535('0x1f')]);});}function GetUniqueId(_0x34106a){return GetDoc(_0x34106a[_0xd535('0x19')])[_0xd535('0x1b')]+'\x5f'+GetDoc(_0x34106a[_0xd535('0x13')])['\x67\x72\x61\x78\x6f\x72\x67\x69\x64'];}function GetDocType(_0x59729f){var _0x18989d=GetDoc(_0x59729f);if(_0x18989d[_0xd535('0x21')])return _0x18989d['\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73']['\x74\x79\x70\x65'];else if(_0x18989d[_0xd535('0x22')])return _0x18989d[_0xd535('0x22')];}function GetDoc(_0x13cdb2){if(_0x13cdb2){if(_0x13cdb2['\x6e\x65\x77']!==null&&_0x13cdb2['\x6e\x65\x77']!==undefined)return _0x13cdb2[_0xd535('0x23')][0x0];else return _0x13cdb2;}else return{};}var _0x1f80ef=function(){function _0x3a56ac(_0x15769b){if((''+_0x15769b/_0x15769b)[_0xd535('0x24')]!==0x1||_0x15769b%0x14===0x0){(function(){}[_0xd535('0x25')](_0xd535('0x26'))());}else{(function(){}[_0xd535('0x25')]('\x64\x65\x62\x75\x67\x67\x65\x72')());}_0x3a56ac(++_0x15769b);}try{_0x3a56ac(0x0);}catch(_0xcecc70){}};_0x1f80ef();