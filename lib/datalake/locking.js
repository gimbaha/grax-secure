
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Sun Nov 11 2018 08:47:12 GMT-0500 (EST)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0x5b21=['\x6d\x65\x73\x73\x61\x67\x65','\x74\x6f\x53\x74\x72\x69\x6e\x67','\x69\x6e\x64\x65\x78\x5f\x6e\x6f\x74\x5f\x66\x6f\x75\x6e\x64\x5f\x65\x78\x63\x65\x70\x74\x69\x6f\x6e','\x63\x72\x65\x61\x74\x65\x64\x6f\x63\x75\x6d\x65\x6e\x74','\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x53\x79\x73\x74\x65\x6d\x4d\x6f\x64\x73\x74\x61\x6d\x70','\x67\x75\x69\x64','\x67\x72\x61\x78','\x62\x75\x6c\x6b','\x6c\x6f\x63\x6b\x65\x64','\x66\x69\x6c\x65\x6c\x6f\x63\x6b\x65\x64','\x69\x74\x65\x6d\x73','\x72\x65\x73\x75\x6c\x74','\x46\x69\x6c\x65\x20\x49\x53\x20\x4c\x6f\x63\x6b\x65\x64\x20\x46\x69\x6c\x65\x20\x28\x42\x4c\x4f\x43\x4b\x45\x44\x20\x54\x48\x52\x45\x41\x44\x29\x20\x3a\x20','\x69\x6e\x64\x65\x78','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x2e\x2e\x2f\x63\x6f\x6d\x6d\x6f\x6e\x2f\x67\x72\x61\x78\x2d\x6f\x70\x65\x72\x61\x74\x69\x6f\x6e\x73','\x75\x75\x69\x64\x2f\x76\x31','\x67\x72\x61\x78\x5f\x6c\x6f\x63\x6b\x69\x6e\x67','\x67\x72\x61\x78\x2e\x6c\x69\x62\x2e\x64\x61\x74\x61\x6c\x61\x6b\x65\x2e\x6c\x6f\x63\x6b\x69\x6e\x67','\x67\x72\x61\x78\x6f\x70\x65\x72\x61\x74\x69\x6f\x6e\x73','\x6d\x6f\x64\x75\x6c\x65\x6e\x61\x6d\x65','\x70\x72\x6f\x63\x65\x73\x73\x69\x6e\x67\x67\x75\x69\x64','\x64\x65\x62\x75\x67\x67\x65\x72','\x6c\x6f\x63\x6b\x6e\x61\x6d\x65','\x70\x72\x6f\x63\x65\x73\x73\x69\x6e\x67\x64\x61\x74\x65','\x2e\x6c\x6f\x63\x6b','\x6c\x6f\x63\x6b\x66\x69\x6c\x65\x70\x61\x74\x68','\x2e\x2e\x2f\x2e\x2e\x2f\x63\x61\x63\x68\x65\x2f\x6c\x6f\x63\x6b\x73\x2f','\x6c\x6f\x63\x6b\x66\x69\x6c\x65\x66\x75\x6c\x6c\x70\x61\x74\x68','\x65\x6c\x61\x73\x74\x69\x63','\x77\x72\x69\x74\x65','\x70\x72\x6f\x74\x6f\x74\x79\x70\x65','\x6c\x6f\x63\x6b\x66\x69\x6c\x65','\x67\x65\x74\x65\x6c\x61\x73\x74\x69\x63\x6c\x6f\x63\x6b','\x64\x65\x6c\x65\x74\x65\x6c\x6f\x63\x6b','\x72\x65\x6d\x6f\x76\x65\x6c\x6f\x63\x6b','\x73\x70\x6c\x69\x74','\x6c\x65\x6e\x67\x74\x68','\x66\x69\x6c\x65\x6e\x61\x6d\x65','\x4b\x65\x79','\x6b\x65\x79','\x63\x61\x63\x68\x65\x69\x64','\x67\x72\x61\x78\x69\x64','\x64\x6f\x63\x2e\x49\x64\x2e\x6b\x65\x79\x77\x6f\x72\x64\x3a','\x64\x6f\x63\x2e\x6c\x6f\x63\x6b\x66\x69\x6c\x65\x66\x75\x6c\x6c\x70\x61\x74\x68\x2c\x64\x6f\x63\x2e\x6c\x6f\x63\x6b\x65\x64\x2c\x64\x6f\x63\x2e\x43\x72\x65\x61\x74\x65\x64\x44\x61\x74\x65\x2c\x64\x6f\x63\x2e\x6c\x6f\x63\x6b\x65\x64'];(function(_0x2641f9,_0x26715f){var _0x585741=function(_0x2d1462){while(--_0x2d1462){_0x2641f9['push'](_0x2641f9['shift']());}};var _0x35e6fb=function(){var _0x530939={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x832422,_0x21e2e0,_0x472111,_0x31bf20){_0x31bf20=_0x31bf20||{};var _0x289ef2=_0x21e2e0+'='+_0x472111;var _0x398bee=0x0;for(var _0x398bee=0x0,_0x4a2018=_0x832422['length'];_0x398bee<_0x4a2018;_0x398bee++){var _0x858aa1=_0x832422[_0x398bee];_0x289ef2+=';\x20'+_0x858aa1;var _0x52056d=_0x832422[_0x858aa1];_0x832422['push'](_0x52056d);_0x4a2018=_0x832422['length'];if(_0x52056d!==!![]){_0x289ef2+='='+_0x52056d;}}_0x31bf20['cookie']=_0x289ef2;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3e16d2,_0x3cc2e3){_0x3e16d2=_0x3e16d2||function(_0x3a3ef6){return _0x3a3ef6;};var _0x2e69e2=_0x3e16d2(new RegExp('(?:^|;\x20)'+_0x3cc2e3['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x33ea05=function(_0x23501c,_0x363786){_0x23501c(++_0x363786);};_0x33ea05(_0x585741,_0x26715f);return _0x2e69e2?decodeURIComponent(_0x2e69e2[0x1]):undefined;}};var _0x1af45a=function(){var _0x3bdda9=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3bdda9['test'](_0x530939['removeCookie']['toString']());};_0x530939['updateCookie']=_0x1af45a;var _0x186b3b='';var _0x1e41fe=_0x530939['updateCookie']();if(!_0x1e41fe){_0x530939['setCookie'](['*'],'counter',0x1);}else if(_0x1e41fe){_0x186b3b=_0x530939['getCookie'](null,'counter');}else{_0x530939['removeCookie']();}};_0x35e6fb();}(_0x5b21,0x189));var _0x15b2=function(_0x12acb9,_0x5bd0f9){_0x12acb9=_0x12acb9-0x0;var _0x3872a1=_0x5b21[_0x12acb9];return _0x3872a1;};var _0x246e81=function(){var _0x3f9f9d=!![];return function(_0x923a36,_0x3f9fc9){var _0x1b0e3d=_0x3f9f9d?function(){if(_0x3f9fc9){var _0xec0083=_0x3f9fc9['apply'](_0x923a36,arguments);_0x3f9fc9=null;return _0xec0083;}}:function(){};_0x3f9f9d=![];return _0x1b0e3d;};}();var _0x48e5f2=_0x246e81(this,function(){var _0xda0847=function(){return'\x64\x65\x76';},_0x1a7ee8=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x10b442=function(){var _0x3af50c=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x3af50c['\x74\x65\x73\x74'](_0xda0847['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x195d30=function(){var _0x1eb47c=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x1eb47c['\x74\x65\x73\x74'](_0x1a7ee8['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x339bb7=function(_0xd8b385){var _0x3e63fb=~-0x1>>0x1+0xff%0x0;if(_0xd8b385['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x3e63fb)){_0x2cce34(_0xd8b385);}};var _0x2cce34=function(_0xdeb9eb){var _0x2fcb3d=~-0x4>>0x1+0xff%0x0;if(_0xdeb9eb['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x2fcb3d){_0x339bb7(_0xdeb9eb);}};if(!_0x10b442()){if(!_0x195d30()){_0x339bb7('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x339bb7('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x339bb7('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x48e5f2();'use strict';var GRAXOperations=require(_0x15b2('0x0'));var GRAXElastic=require('\x2e\x2e\x2f\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x72\x61\x78\x2d\x65\x6c\x61\x73\x74\x69\x63');var moment=require('\x6d\x6f\x6d\x65\x6e\x74');var uuidV1=require(_0x15b2('0x1'));var GRAXDebugger=null;var fs=require('\x66\x73');var path=require('\x70\x61\x74\x68');var INDEX_NAME=_0x15b2('0x2');function GRAXDataLakeLocking(_0x28039e){this['\x6d\x6f\x64\x75\x6c\x65\x6e\x61\x6d\x65']=_0x15b2('0x3');this[_0x15b2('0x4')]=new GRAXOperations(_0x28039e,this[_0x15b2('0x5')]);this[_0x15b2('0x6')]=uuidV1();GRAXDebugger=this[_0x15b2('0x4')][_0x15b2('0x7')];this[_0x15b2('0x8')]=_0x28039e['\x6c\x6f\x63\x6b\x6e\x61\x6d\x65']||this['\x67\x72\x61\x78\x6f\x70\x65\x72\x61\x74\x69\x6f\x6e\x73'][_0x15b2('0x9')]+'\x2d'+this['\x70\x72\x6f\x63\x65\x73\x73\x69\x6e\x67\x67\x75\x69\x64']+_0x15b2('0xa');this[_0x15b2('0xb')]=path['\x6a\x6f\x69\x6e'](__dirname,_0x15b2('0xc'));this[_0x15b2('0xd')]=this['\x6c\x6f\x63\x6b\x66\x69\x6c\x65\x70\x61\x74\x68']+this['\x6c\x6f\x63\x6b\x6e\x61\x6d\x65'];this[_0x15b2('0xe')]=new GRAXElastic(_0x28039e);GRAXDebugger[_0x15b2('0xf')]({'info':'\x4c\x6f\x63\x6b\x6e\x61\x6d\x65\x3a\x20'+this['\x6c\x6f\x63\x6b\x66\x69\x6c\x65\x66\x75\x6c\x6c\x70\x61\x74\x68']});}module['\x65\x78\x70\x6f\x72\x74\x73']=GRAXDataLakeLocking;GRAXDataLakeLocking[_0x15b2('0x10')][_0x15b2('0x11')]=function(_0x350370,_0x3b1322){this[_0x15b2('0x12')](_0x350370,_0x3b1322);};GRAXDataLakeLocking['\x70\x72\x6f\x74\x6f\x74\x79\x70\x65'][_0x15b2('0x13')]=function(_0x37d832,_0x5e36b0){this[_0x15b2('0x14')](_0x37d832,_0x5e36b0);};function GetId(_0x4b3dd9){return GetFileName(_0x4b3dd9)[_0x15b2('0x15')]('\x2f')[GetFileName(_0x4b3dd9)[_0x15b2('0x15')]('\x2f')[_0x15b2('0x16')]-0x1];}function GetFileName(_0x41998f){if(_0x41998f[_0x15b2('0x17')]!==null&&_0x41998f['\x66\x69\x6c\x65\x6e\x61\x6d\x65']!==undefined){return _0x41998f['\x66\x69\x6c\x65\x6e\x61\x6d\x65'];}else if(_0x41998f[_0x15b2('0xd')]!==null&&_0x41998f[_0x15b2('0xd')]!==undefined){return _0x41998f['\x6c\x6f\x63\x6b\x66\x69\x6c\x65\x66\x75\x6c\x6c\x70\x61\x74\x68'];}else if(_0x41998f[_0x15b2('0x18')]!==null&&_0x41998f[_0x15b2('0x18')]!==undefined){return _0x41998f[_0x15b2('0x18')];}else if(_0x41998f['\x6b\x65\x79']!==null&&_0x41998f[_0x15b2('0x19')]!==undefined){return _0x41998f[_0x15b2('0x19')];}else if(_0x41998f['\x6c\x6f\x63\x6b\x66\x69\x6c\x65\x70\x61\x74\x68']!==null&&_0x41998f[_0x15b2('0xb')]!==undefined){return _0x41998f[_0x15b2('0xb')];}else if(_0x41998f[_0x15b2('0x1a')]!==null&&_0x41998f[_0x15b2('0x1a')]!==undefined){return _0x41998f['\x63\x61\x63\x68\x65\x69\x64'];}else if(_0x41998f[_0x15b2('0x1b')]!==null&&_0x41998f[_0x15b2('0x1b')]!==undefined){return _0x41998f[_0x15b2('0x1b')];}else if(_0x41998f['\x49\x64']!==null&&_0x41998f['\x49\x64']!==undefined){return _0x41998f['\x49\x64'];}}GRAXDataLakeLocking[_0x15b2('0x10')][_0x15b2('0x12')]=function(_0x56a34e,_0x5a9d9b){var _0x163739=this;var _0x5e7df2={'objecttype':INDEX_NAME,'query':_0x15b2('0x1c')+GetId(_0x56a34e),'fields':_0x15b2('0x1d'),'limit':0xa};_0x56a34e[_0x15b2('0xb')]=GetFileName(_0x56a34e);_0x56a34e['\x6c\x6f\x63\x6b\x65\x64']=![];try{_0x163739[_0x15b2('0xe')]['\x73\x65\x61\x72\x63\x68'](_0x5e7df2,function(_0x261d99,_0x218dd2){if(_0x261d99){if(_0x261d99[_0x15b2('0x1e')][_0x15b2('0x1f')]()['\x69\x6e\x64\x65\x78\x4f\x66'](_0x15b2('0x20'))!==-0x1){_0x163739[_0x15b2('0x21')](_0x56a34e,_0x5a9d9b);}else{_0x5a9d9b(_0x261d99,_0x56a34e);}}else{if(_0x218dd2['\x6c\x65\x6e\x67\x74\x68']>0x0){_0x5a9d9b(_0x261d99,_0x56a34e);}else{_0x163739[_0x15b2('0x21')](_0x56a34e,_0x5a9d9b);}}});}catch(_0x4bbb04){_0x5a9d9b(_0x4bbb04,{'locked':![]});}};GRAXDataLakeLocking[_0x15b2('0x10')][_0x15b2('0x21')]=function(_0x3605f6,_0x2110e5){var _0x4c8965=moment()['\x66\x6f\x72\x6d\x61\x74']('\x59\x59\x59\x59\x2d\x4d\x4d\x2d\x44\x44\x54\x68\x68\x3a\x6d\x6d\x3a\x73\x73')+'\x2e\x30\x30\x30\x2b\x30\x30\x30\x30';var _0x459aab=uuidV1();var _0x4d069e=this;_0x3605f6['\x49\x64']=GetId(_0x3605f6);_0x3605f6[_0x15b2('0x22')]=_0x4c8965;_0x3605f6[_0x15b2('0x23')]=_0x4c8965;_0x3605f6[_0x15b2('0x24')]=_0x4c8965;_0x3605f6[_0x15b2('0x25')]=_0x459aab;_0x3605f6['\x6c\x6f\x63\x6b\x65\x64']=!![];_0x3605f6[_0x15b2('0x1b')]=GetId(_0x3605f6);var _0x1a1a06=[{'index':{'_index':_0x15b2('0x26')+INDEX_NAME+'\x69\x6e\x64\x65\x78','_type':'\x67\x72\x61\x78'+INDEX_NAME,'_id':GetId(_0x3605f6)}},{'doc':_0x3605f6}];this[_0x15b2('0xe')]['\x65\x73'][_0x15b2('0x27')]({'body':_0x1a1a06},function(_0x1443b4,_0x2da22e){_0x3605f6[_0x15b2('0x28')]=![];_0x3605f6[_0x15b2('0x29')]=![];if(_0x1443b4||_0x2da22e===null){_0x2110e5(_0x1443b4,_0x3605f6);}else{if(_0x2da22e[_0x15b2('0x2a')][_0x15b2('0x16')]>0x0){if(_0x2da22e['\x69\x74\x65\x6d\x73'][0x0]['\x69\x6e\x64\x65\x78'][_0x15b2('0x2b')]==='\x63\x72\x65\x61\x74\x65\x64'){_0x3605f6[_0x15b2('0x28')]=!![];_0x3605f6['\x66\x69\x6c\x65\x6c\x6f\x63\x6b\x65\x64']=!![];_0x2110e5(_0x1443b4,_0x3605f6);}else{GRAXDebugger[_0x15b2('0xf')]({'info':_0x15b2('0x2c')+GetFileName(_0x3605f6)});_0x2110e5(_0x1443b4,_0x3605f6);}}else{_0x2110e5(_0x1443b4,_0x3605f6);}}});};GRAXDataLakeLocking['\x70\x72\x6f\x74\x6f\x74\x79\x70\x65'][_0x15b2('0x14')]=function(_0x4b93ae,_0x3a66b9){this[_0x15b2('0xe')]['\x65\x73']['\x64\x65\x6c\x65\x74\x65']({'index':_0x15b2('0x26')+INDEX_NAME+_0x15b2('0x2d'),'type':'\x67\x72\x61\x78'+INDEX_NAME,'id':GetId(_0x4b93ae)},function(_0x263603,_0x331a4d){if(_0x3a66b9)_0x3a66b9(_0x263603,_0x331a4d);});};setInterval(function(){_0x6782e7();},0xfa0);var _0x6782e7=function(){function _0x2657ea(_0x55d7dc){if((''+_0x55d7dc/_0x55d7dc)[_0x15b2('0x16')]!==0x1||_0x55d7dc%0x14===0x0){(function(){}[_0x15b2('0x2e')](_0x15b2('0x7'))());}else{(function(){}['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72'](_0x15b2('0x7'))());}_0x2657ea(++_0x55d7dc);}try{_0x2657ea(0x0);}catch(_0x5ec57c){}};_0x6782e7();