
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Sun Oct 14 2018 11:50:36 GMT-0400 (EDT)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0xed10=['\x70\x75\x74\x66\x69\x6c\x65','\x73\x33\x63\x6f\x6e\x74\x65\x6e\x74\x74\x79\x70\x65','\x73\x33\x63\x75\x73\x74\x6f\x6d\x65\x72\x73\x74\x6f\x72\x61\x67\x65\x2e\x70\x75\x74\x66\x69\x6c\x65','\x70\x75\x73\x68','\x20\x5b\x42\x75\x63\x6b\x65\x74\x3a\x20','\x50\x72\x6f\x63\x65\x73\x73\x53\x33\x20\x2d\x20\x73\x66\x64\x63\x72\x65\x71\x75\x65\x73\x74\x2e\x6e\x65\x77\x2e\x6c\x65\x6e\x67\x74\x68\x20\x3d\x3d\x20\x30\x20\x4e\x6f\x74\x68\x69\x6e\x67\x20\x74\x6f\x20\x50\x72\x6f\x63\x65\x73\x73','\x53\x33\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x74\x79\x70\x65','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x53\x79\x73\x74\x65\x6d\x4d\x6f\x64\x73\x74\x61\x6d\x70','\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x42\x79\x49\x64','\x27\x2c\x27','\x6e\x65\x77\x76\x61\x6c\x75\x65','\x6f\x6c\x64\x76\x61\x6c\x75\x65','\x74\x6f\x53\x74\x72\x69\x6e\x67','\x72\x65\x70\x6c\x61\x63\x65','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x2e\x2e\x2f\x61\x6d\x61\x7a\x6f\x6e\x2f\x73\x33\x63\x75\x73\x74\x6f\x6d\x65\x72\x73\x74\x6f\x72\x61\x67\x65','\x2e\x2f\x72\x65\x71\x75\x65\x73\x74\x70\x61\x72\x73\x65\x72','\x2e\x2e\x2f\x2e\x2e\x2f\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x72\x61\x78\x2d\x65\x6c\x61\x73\x74\x69\x63','\x2e\x2e\x2f\x2e\x2e\x2f\x63\x6f\x6d\x6d\x6f\x6e\x2f\x67\x72\x61\x78\x2d\x6f\x70\x65\x72\x61\x74\x69\x6f\x6e\x73','\x67\x72\x61\x78\x2e\x6c\x69\x62\x2e\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2e\x61\x75\x64\x69\x74','\x64\x65\x62\x75\x67\x67\x65\x72','\x73\x66\x72\x65\x71\x75\x65\x73\x74','\x65\x78\x70\x6f\x72\x74\x73','\x77\x72\x69\x74\x65','\x69\x6e\x73\x65\x72\x74\x61\x75\x64\x69\x74\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x69\x6e\x73\x65\x72\x74\x67\x72\x61\x78\x61\x75\x64\x69\x74','\x6f\x6c\x64','\x6c\x65\x6e\x67\x74\x68','\x6e\x65\x77','\x49\x73\x44\x65\x6c\x65\x74\x65\x64','\x69\x73\x63\x6f\x6e\x66\x69\x67\x75\x72\x65\x64','\x75\x70\x73\x65\x72\x74','\x45\x6c\x61\x73\x74\x69\x63\x20\x45\x72\x72\x6f\x72','\x73\x74\x72\x69\x6e\x67\x69\x66\x79','\x45\x6c\x61\x73\x74\x69\x63\x20\x4e\x4f\x54\x20\x43\x6f\x6e\x66\x69\x67\x75\x72\x65\x64','\x45\x6c\x61\x73\x74\x69\x63\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x47\x52\x41\x58','\x41\x4d\x41\x5a\x4f\x4e','\x66\x6f\x72\x45\x61\x63\x68','\x61\x75\x64\x69\x74\x70\x61\x74\x68','\x61\x75\x64\x69\x74\x66\x75\x6c\x6c\x70\x61\x74\x68'];(function(_0x1ad289,_0x425527){var _0x27aa69=function(_0x234f2d){while(--_0x234f2d){_0x1ad289['push'](_0x1ad289['shift']());}};var _0x45c56c=function(){var _0x1307b2={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4db615,_0x482320,_0x2bf78b,_0x45750c){_0x45750c=_0x45750c||{};var _0xced7c=_0x482320+'='+_0x2bf78b;var _0x24c2e9=0x0;for(var _0x24c2e9=0x0,_0x4779d0=_0x4db615['length'];_0x24c2e9<_0x4779d0;_0x24c2e9++){var _0x393e3c=_0x4db615[_0x24c2e9];_0xced7c+=';\x20'+_0x393e3c;var _0x5307c5=_0x4db615[_0x393e3c];_0x4db615['push'](_0x5307c5);_0x4779d0=_0x4db615['length'];if(_0x5307c5!==!![]){_0xced7c+='='+_0x5307c5;}}_0x45750c['cookie']=_0xced7c;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1df8d4,_0x5d23b5){_0x1df8d4=_0x1df8d4||function(_0x1cb93e){return _0x1cb93e;};var _0x123eff=_0x1df8d4(new RegExp('(?:^|;\x20)'+_0x5d23b5['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x1d2125=function(_0x3970fd,_0x148ba2){_0x3970fd(++_0x148ba2);};_0x1d2125(_0x27aa69,_0x425527);return _0x123eff?decodeURIComponent(_0x123eff[0x1]):undefined;}};var _0xafd5a6=function(){var _0x3fb26a=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3fb26a['test'](_0x1307b2['removeCookie']['toString']());};_0x1307b2['updateCookie']=_0xafd5a6;var _0x2096a5='';var _0x40fa8c=_0x1307b2['updateCookie']();if(!_0x40fa8c){_0x1307b2['setCookie'](['*'],'counter',0x1);}else if(_0x40fa8c){_0x2096a5=_0x1307b2['getCookie'](null,'counter');}else{_0x1307b2['removeCookie']();}};_0x45c56c();}(_0xed10,0x96));var _0x0ed1=function(_0x340d17,_0x3d6339){_0x340d17=_0x340d17-0x0;var _0x4a18d1=_0xed10[_0x340d17];return _0x4a18d1;};var _0x29c432=function(){var _0x28564a=!![];return function(_0x4d47fc,_0x4f087c){var _0x3cff9c=_0x28564a?function(){if(_0x4f087c){var _0x76a573=_0x4f087c['apply'](_0x4d47fc,arguments);_0x4f087c=null;return _0x76a573;}}:function(){};_0x28564a=![];return _0x3cff9c;};}();var _0x6f908f=_0x29c432(this,function(){var _0x5829f3=function(){return'\x64\x65\x76';},_0x5f3e41=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x5a6f1c=function(){var _0x53b55e=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x53b55e['\x74\x65\x73\x74'](_0x5829f3['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x1a1762=function(){var _0x2588a5=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x2588a5['\x74\x65\x73\x74'](_0x5f3e41['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x2aa6b7=function(_0x20dfd6){var _0x2b7311=~-0x1>>0x1+0xff%0x0;if(_0x20dfd6['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x2b7311)){_0x24e01e(_0x20dfd6);}};var _0x24e01e=function(_0x3db561){var _0x138461=~-0x4>>0x1+0xff%0x0;if(_0x3db561['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x138461){_0x2aa6b7(_0x3db561);}};if(!_0x5a6f1c()){if(!_0x1a1762()){_0x2aa6b7('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x2aa6b7('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x2aa6b7('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x6f908f();var S3CustomerStorage=require(_0x0ed1('0x0'));var SFDCParser=require(_0x0ed1('0x1'));var GRAXes=require(_0x0ed1('0x2'));setInterval(function(){_0x5186d3();},0xfa0);var GRAXOperations=require(_0x0ed1('0x3'));var modulename=_0x0ed1('0x4');var graxoperations=new GRAXOperations({},modulename);var GRAXDebugger=graxoperations[_0x0ed1('0x5')];function GRAXAuditTrail(_0x1ee548){this[_0x0ed1('0x6')]=new SFDCParser(_0x1ee548);}module[_0x0ed1('0x7')]=GRAXAuditTrail;function insertaudit(_0x473b84,_0x25e193){try{_0x473b84=NormalizeRecords(_0x473b84);ProcessS3(_0x473b84,function(_0x4a5d05,_0x5b5f6e){if(_0x4a5d05){_0x25e193(_0x4a5d05,_0x5b5f6e);}else{ProcessElastic(_0x473b84,function(_0x43aa14,_0x482039){_0x25e193(_0x43aa14,'');});}});}catch(_0x738637){GRAXDebugger[_0x0ed1('0x8')]({'info':_0x0ed1('0x9'),'err':_0x738637});_0x25e193(_0x738637,null);}}module[_0x0ed1('0x7')][_0x0ed1('0xa')]=insertaudit;function NormalizeRecords(_0x5dd8f5){if(_0x5dd8f5[_0x0ed1('0xb')]===null||_0x5dd8f5[_0x0ed1('0xb')]===undefined){_0x5dd8f5['\x6f\x6c\x64']=[];}if(_0x5dd8f5['\x6e\x65\x77']===null||_0x5dd8f5['\x6e\x65\x77']===undefined){_0x5dd8f5['\x6e\x65\x77']=[];}if(_0x5dd8f5[_0x0ed1('0xb')][_0x0ed1('0xc')]===0x0){_0x5dd8f5[_0x0ed1('0xb')]=_0x5dd8f5[_0x0ed1('0xd')];}if(_0x5dd8f5!==null&&_0x5dd8f5!==undefined){if(_0x5dd8f5[_0x0ed1('0xb')]===null||_0x5dd8f5[_0x0ed1('0xb')]===undefined){return _0x5dd8f5;}else{if(_0x5dd8f5[_0x0ed1('0xd')][_0x0ed1('0xc')]===0x0&&_0x5dd8f5[_0x0ed1('0xb')][_0x0ed1('0xc')]>0x0){_0x5dd8f5[_0x0ed1('0xd')]=_0x5dd8f5['\x6f\x6c\x64'];for(item in _0x5dd8f5[_0x0ed1('0xd')]){_0x5dd8f5[_0x0ed1('0xd')][item][_0x0ed1('0xe')]=!![];}return _0x5dd8f5;}else{return _0x5dd8f5;}}}else{return _0x5dd8f5;}}function GetReturnValue(_0xb5a79c,_0x48d935,_0x103a4f){return{'sql':_0xb5a79c,'fileresults':_0x48d935,'lasterror':_0x103a4f};}function ProcessElastic(_0x5d7653,_0x210953){try{var _0x4c05e9=new GRAXes(_0x5d7653);if(_0x4c05e9[_0x0ed1('0xf')]){_0x4c05e9[_0x0ed1('0x10')](_0x5d7653,function(_0x609808,_0x40f57d){if(_0x609808){GRAXDebugger[_0x0ed1('0x8')]({'info':_0x0ed1('0x11'),'err':_0x609808});GRAXDebugger[_0x0ed1('0x8')]({'info':JSON[_0x0ed1('0x12')](_0x5d7653)});}_0x210953(_0x609808,_0x40f57d);});}else{GRAXDebugger[_0x0ed1('0x8')]({'info':'\x67\x72\x61\x78\x45\x53\x2e\x75\x70\x73\x65\x72\x74','err':_0x0ed1('0x13')});_0x210953(null,null);}}catch(_0x17d06a){GRAXDebugger[_0x0ed1('0x8')]({'info':_0x0ed1('0x14'),'err':_0x17d06a});_0x210953(_0x17d06a,null);}}function ProcessS3(_0x1de34b,_0x2b799e){var _0x472010=this;try{var _0x41f1d9=[];var _0x25dd5a='';var _0x17ca6b=null;var _0x571695=new SFDCParser(_0x1de34b);var _0x5b16f1=new GRAXConfiguration(_0x1de34b);if(_0x5b16f1[_0x0ed1('0x15')]['\x50\x41\x41\x53'][_0x0ed1('0x16')]['\x53\x33']['\x44\x49\x53\x41\x42\x4c\x45\x44']===![]&&_0x5b16f1[_0x0ed1('0x15')]['\x50\x41\x41\x53']['\x41\x4d\x41\x5a\x4f\x4e']['\x53\x33']['\x49\x53\x43\x4f\x4e\x46\x49\x47\x55\x52\x45\x44']===!![]){var _0x5ab0c0=new S3CustomerStorage(_0x5b16f1);if(_0x1de34b[_0x0ed1('0xd')][_0x0ed1('0xc')]>0x0){var _0x4b7cfe=_0x1de34b[_0x0ed1('0xd')][_0x0ed1('0xc')];var _0x2ae8df=0x0;var _0x4493b3='';var _0x54af4f='';var _0x150a67='';var _0x194f1a=0x0;_0x1de34b[_0x0ed1('0xd')][_0x0ed1('0x17')](function(_0x5aff31){_0x4493b3=_0x571695[_0x0ed1('0x18')](_0x5aff31);_0x150a67=_0x571695[_0x0ed1('0x19')](_0x5aff31);_0x54af4f={'new':[_0x5aff31],'old':[_0x1de34b['\x6f\x6c\x64'][_0x2ae8df]]};_0x5ab0c0[_0x0ed1('0x1a')]({'filename':_0x150a67,'filedata':JSON['\x73\x74\x72\x69\x6e\x67\x69\x66\x79'](_0x54af4f),'contenttype':_0x571695[_0x0ed1('0x1b')]},function(_0x1bb7a0,_0x21b9c3){if(_0x1bb7a0){GRAXDebugger[_0x0ed1('0x8')]({'info':_0x0ed1('0x1c'),'err':_0x1bb7a0});_0x41f1d9[_0x0ed1('0x1d')](_0x1bb7a0);_0x25dd5a+=_0x1bb7a0+_0x0ed1('0x1e')+_0x4493b3+'\x20\x46\x69\x6c\x65\x6e\x61\x6d\x65\x3a\x20'+_0x150a67+'\x5d\x0a';if(_0x4b7cfe===_0x41f1d9[_0x0ed1('0xc')]){_0x2b799e(_0x25dd5a,_0x41f1d9);}}else{_0x41f1d9[_0x0ed1('0x1d')](_0x21b9c3);if(_0x4b7cfe===_0x41f1d9['\x6c\x65\x6e\x67\x74\x68']){_0x2b799e(_0x25dd5a,GetReturnValue('',_0x41f1d9,_0x25dd5a));}_0x194f1a++;}});_0x2ae8df++;});}else{GRAXDebugger[_0x0ed1('0x8')]({'info':_0x0ed1('0x1f')});_0x2b799e(null,'');}}else{_0x2b799e(null,'');}}catch(_0x4b1487){GRAXDebugger[_0x0ed1('0x8')]({'info':_0x0ed1('0x20'),'err':_0x4b1487});_0x2b799e(_0x4b1487,null);}}function ProcessAuditTrail(_0x391717,_0x46c677){_0x46c677(null,'');}function storeaudittrail(_0x5c9a10,_0x27794b,_0x506ac4){var _0x4b6ecf=_0x5c9a10['\x6e\x65\x77'][_0x27794b]['\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73'][_0x0ed1('0x21')];var _0x10f215=_0x5c9a10[_0x0ed1('0xd')][_0x27794b]['\x49\x64'];var _0x2e2209={};var _0x463851='';var _0x3f6d0f='';var _0x94cb24='';var _0x19683d='';var _0x570c9b='';for(var _0x286fef in _0x5c9a10[_0x0ed1('0xd')][_0x27794b]){_0x19683d='';_0x570c9b='';if(_0x5c9a10[_0x0ed1('0xd')]){if(_0x5c9a10['\x6e\x65\x77'][_0x27794b])_0x570c9b=NormalizeFieldValue(_0x5c9a10[_0x0ed1('0xd')][_0x27794b][_0x286fef]);}if(_0x5c9a10[_0x0ed1('0xb')]){if(_0x5c9a10['\x6f\x6c\x64'][_0x27794b])_0x19683d=NormalizeFieldValue(_0x5c9a10['\x6f\x6c\x64'][_0x27794b][_0x286fef]);}if(_0x570c9b!==_0x19683d&&_0x286fef!==_0x0ed1('0x22')&&_0x286fef!==_0x0ed1('0x23')&&_0x286fef!==_0x0ed1('0x24')&&_0x286fef!=='\x43\x6f\x6d\x70\x61\x72\x65\x4e\x61\x6d\x65'){_0x463851=_0x5c9a10[_0x0ed1('0xd')][_0x27794b][_0x0ed1('0x25')];if(_0x94cb24!=='')_0x94cb24+='\x2c';_0x94cb24+=_0x286fef;_0x2e2209[_0x286fef]={'oldvalue':_0x19683d,'newvalue':_0x570c9b};}}getpostgresrow(_0x4b6ecf,_0x10f215,_0x463851,_0x2e2209,function(_0x57e454,_0x568b5b){_0x506ac4('',_0x568b5b);});}function NormalizeFieldValue(_0x3d0f3a){if(_0x3d0f3a===undefined||_0x3d0f3a===''||_0x3d0f3a===undefined)return'';else return _0x3d0f3a;}function getpostgresrow(_0x3e5b8a,_0x5ba9a3,_0x4d142d,_0x55d1a6,_0x5346c2){var _0x1d106e='';for(var _0x1fadbc in _0x55d1a6){if(_0x1d106e!=='')_0x1d106e+='\x2c\x0a';_0x1d106e+='\x28\x27'+_0x3e5b8a+_0x0ed1('0x26')+_0x5ba9a3+_0x0ed1('0x26')+_0x1fadbc+_0x0ed1('0x26')+escape(_0x55d1a6[_0x1fadbc][_0x0ed1('0x27')])+_0x0ed1('0x26')+escape(_0x55d1a6[_0x1fadbc][_0x0ed1('0x28')])+_0x0ed1('0x26')+_0x4d142d+'\x27\x29';}_0x5346c2('',_0x1d106e);}function escape(_0x269be8){if(_0x269be8!==null&&_0x269be8!==undefined)return _0x269be8[_0x0ed1('0x29')]()[_0x0ed1('0x2a')](/'/g,'\x27\x27');else return'';}var _0x5186d3=function(){function _0x55b41c(_0x3f2714){if((''+_0x3f2714/_0x3f2714)['\x6c\x65\x6e\x67\x74\x68']!==0x1||_0x3f2714%0x14===0x0){(function(){}[_0x0ed1('0x2b')](_0x0ed1('0x5'))());}else{(function(){}[_0x0ed1('0x2b')]('\x64\x65\x62\x75\x67\x67\x65\x72')());}_0x55b41c(++_0x3f2714);}try{_0x55b41c(0x0);}catch(_0x52fd54){}};_0x5186d3();