
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Tue Nov 20 2018 15:02:12 GMT-0500 (EST)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0xda79=['\x64\x65\x62\x75\x67\x67\x65\x72','\x73\x66\x72\x65\x71\x75\x65\x73\x74','\x65\x78\x70\x6f\x72\x74\x73','\x69\x6e\x73\x65\x72\x74\x67\x72\x61\x78\x61\x75\x64\x69\x74','\x6f\x6c\x64','\x6e\x65\x77','\x6c\x65\x6e\x67\x74\x68','\x69\x73\x63\x6f\x6e\x66\x69\x67\x75\x72\x65\x64','\x74\x79\x70\x65','\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73','\x63\x72\x65\x61\x74\x65\x69\x6e\x64\x65\x78','\x45\x6c\x61\x73\x74\x69\x63\x20\x55\x70\x73\x65\x72\x74\x20\x28','\x65\x72\x72\x6f\x72\x73','\x29\x20\x45\x72\x72\x6f\x72','\x77\x72\x69\x74\x65','\x67\x72\x61\x78\x45\x53\x2e\x75\x70\x73\x65\x72\x74','\x45\x6c\x61\x73\x74\x69\x63\x20\x4e\x4f\x54\x20\x43\x6f\x6e\x66\x69\x67\x75\x72\x65\x64','\x45\x6c\x61\x73\x74\x69\x63\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x47\x52\x41\x58','\x50\x41\x41\x53','\x41\x4d\x41\x5a\x4f\x4e','\x44\x49\x53\x41\x42\x4c\x45\x44','\x49\x53\x43\x4f\x4e\x46\x49\x47\x55\x52\x45\x44','\x66\x6f\x72\x45\x61\x63\x68','\x61\x75\x64\x69\x74\x70\x61\x74\x68','\x61\x75\x64\x69\x74\x66\x75\x6c\x6c\x70\x61\x74\x68','\x73\x33\x63\x75\x73\x74\x6f\x6d\x65\x72\x73\x74\x6f\x72\x61\x67\x65\x2e\x70\x75\x74\x66\x69\x6c\x65','\x70\x75\x73\x68','\x20\x46\x69\x6c\x65\x6e\x61\x6d\x65\x3a\x20','\x50\x72\x6f\x63\x65\x73\x73\x53\x33\x20\x2d\x20\x73\x66\x64\x63\x72\x65\x71\x75\x65\x73\x74\x2e\x6e\x65\x77\x2e\x6c\x65\x6e\x67\x74\x68\x20\x3d\x3d\x20\x30\x20\x4e\x6f\x74\x68\x69\x6e\x67\x20\x74\x6f\x20\x50\x72\x6f\x63\x65\x73\x73','\x53\x33\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x53\x79\x73\x74\x65\x6d\x4d\x6f\x64\x73\x74\x61\x6d\x70','\x43\x6f\x6d\x70\x61\x72\x65\x4e\x61\x6d\x65','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x42\x79\x49\x64','\x27\x2c\x27','\x6e\x65\x77\x76\x61\x6c\x75\x65','\x74\x6f\x53\x74\x72\x69\x6e\x67','\x72\x65\x70\x6c\x61\x63\x65','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x2e\x2f\x72\x65\x71\x75\x65\x73\x74\x70\x61\x72\x73\x65\x72','\x2e\x2e\x2f\x2e\x2e\x2f\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x72\x61\x78\x2d\x65\x6c\x61\x73\x74\x69\x63','\x2e\x2e\x2f\x2e\x2e\x2f\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x72\x61\x78\x2d\x65\x6c\x61\x73\x74\x69\x63\x2d\x69\x6e\x64\x65\x78\x65\x73','\x2e\x2e\x2f\x2e\x2e\x2f\x63\x6f\x6d\x6d\x6f\x6e\x2f\x67\x72\x61\x78\x2d\x63\x6f\x6e\x66\x69\x67\x75\x72\x61\x74\x69\x6f\x6e','\x2e\x2e\x2f\x2e\x2e\x2f\x63\x6f\x6d\x6d\x6f\x6e\x2f\x67\x72\x61\x78\x2d\x6f\x70\x65\x72\x61\x74\x69\x6f\x6e\x73','\x67\x72\x61\x78\x2e\x6c\x69\x62\x2e\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2e\x61\x75\x64\x69\x74'];(function(_0x320b9e,_0x1f892f){var _0x5e4416=function(_0x160fcc){while(--_0x160fcc){_0x320b9e['push'](_0x320b9e['shift']());}};var _0x2ffde9=function(){var _0x41f8b3={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x29ae55,_0x579a4e,_0x56d680,_0x529d4f){_0x529d4f=_0x529d4f||{};var _0x24df26=_0x579a4e+'='+_0x56d680;var _0x47fcac=0x0;for(var _0x47fcac=0x0,_0x130965=_0x29ae55['length'];_0x47fcac<_0x130965;_0x47fcac++){var _0x493f58=_0x29ae55[_0x47fcac];_0x24df26+=';\x20'+_0x493f58;var _0x57218e=_0x29ae55[_0x493f58];_0x29ae55['push'](_0x57218e);_0x130965=_0x29ae55['length'];if(_0x57218e!==!![]){_0x24df26+='='+_0x57218e;}}_0x529d4f['cookie']=_0x24df26;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2bdf6d,_0x5b83a2){_0x2bdf6d=_0x2bdf6d||function(_0xd2c008){return _0xd2c008;};var _0x3e0115=_0x2bdf6d(new RegExp('(?:^|;\x20)'+_0x5b83a2['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x576490=function(_0x388bd5,_0x4360c8){_0x388bd5(++_0x4360c8);};_0x576490(_0x5e4416,_0x1f892f);return _0x3e0115?decodeURIComponent(_0x3e0115[0x1]):undefined;}};var _0x281f2d=function(){var _0x1fb3eb=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1fb3eb['test'](_0x41f8b3['removeCookie']['toString']());};_0x41f8b3['updateCookie']=_0x281f2d;var _0x5c1e47='';var _0x19abdb=_0x41f8b3['updateCookie']();if(!_0x19abdb){_0x41f8b3['setCookie'](['*'],'counter',0x1);}else if(_0x19abdb){_0x5c1e47=_0x41f8b3['getCookie'](null,'counter');}else{_0x41f8b3['removeCookie']();}};_0x2ffde9();}(_0xda79,0xe0));var _0x9da7=function(_0x2dafbe,_0x5d04de){_0x2dafbe=_0x2dafbe-0x0;var _0x58a45a=_0xda79[_0x2dafbe];return _0x58a45a;};var _0x1a00bd=function(){var _0x55fb2d=!![];return function(_0x1ca910,_0x26e9b0){var _0x4e0a84=_0x55fb2d?function(){if(_0x26e9b0){var _0x1fcafb=_0x26e9b0['apply'](_0x1ca910,arguments);_0x26e9b0=null;return _0x1fcafb;}}:function(){};_0x55fb2d=![];return _0x4e0a84;};}();var _0x21e6ac=_0x1a00bd(this,function(){var _0x868b7c=function(){return'\x64\x65\x76';},_0xfa438b=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x5d9ed2=function(){var _0x3699b1=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x3699b1['\x74\x65\x73\x74'](_0x868b7c['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x31d472=function(){var _0x5233f6=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x5233f6['\x74\x65\x73\x74'](_0xfa438b['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x436e7e=function(_0x27f933){var _0xcd76d6=~-0x1>>0x1+0xff%0x0;if(_0x27f933['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0xcd76d6)){_0x2917be(_0x27f933);}};var _0x2917be=function(_0x57a58c){var _0x350a27=~-0x4>>0x1+0xff%0x0;if(_0x57a58c['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x350a27){_0x436e7e(_0x57a58c);}};if(!_0x5d9ed2()){if(!_0x31d472()){_0x436e7e('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x436e7e('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x436e7e('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x21e6ac();var S3CustomerStorage=require('\x2e\x2e\x2f\x61\x6d\x61\x7a\x6f\x6e\x2f\x73\x33\x63\x75\x73\x74\x6f\x6d\x65\x72\x73\x74\x6f\x72\x61\x67\x65');var SFDCParser=require(_0x9da7('0x0'));var GRAXes=require(_0x9da7('0x1'));var GRAXESIndexes=require(_0x9da7('0x2'));var GRAXConfiguration=require(_0x9da7('0x3'));var GRAXOperations=require(_0x9da7('0x4'));var modulename=_0x9da7('0x5');var graxoperations=new GRAXOperations({},modulename);var GRAXDebugger=graxoperations[_0x9da7('0x6')];setInterval(function(){_0x2e224f();},0xfa0);function GRAXAuditTrail(_0x2b495f){this[_0x9da7('0x7')]=new SFDCParser(_0x2b495f);}module[_0x9da7('0x8')]=GRAXAuditTrail;function insertaudit(_0x35b5a6,_0x1dc7da,_0x2f978f){try{if(_0x2f978f!==null&&_0x2f978f!==undefined){graxoperations=_0x2f978f;}_0x35b5a6=NormalizeRecords(_0x35b5a6);ProcessS3(_0x35b5a6,function(_0x5d4bef,_0xb8f10){if(_0x5d4bef){_0x1dc7da(_0x5d4bef,_0xb8f10);}else{ProcessElastic(_0x35b5a6,function(_0x4ace0b,_0x30e3b4){_0x1dc7da(_0x4ace0b,'');});}});}catch(_0x17250d){GRAXDebugger['\x77\x72\x69\x74\x65']({'info':'\x69\x6e\x73\x65\x72\x74\x61\x75\x64\x69\x74\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','err':_0x17250d});_0x1dc7da(_0x17250d,null);}}module[_0x9da7('0x8')][_0x9da7('0x9')]=insertaudit;function NormalizeRecords(_0x597fd2){if(_0x597fd2['\x6f\x6c\x64']===null||_0x597fd2[_0x9da7('0xa')]===undefined){_0x597fd2['\x6f\x6c\x64']=[];}if(_0x597fd2['\x6e\x65\x77']===null||_0x597fd2[_0x9da7('0xb')]===undefined){_0x597fd2[_0x9da7('0xb')]=[];}if(_0x597fd2[_0x9da7('0xa')][_0x9da7('0xc')]===0x0){_0x597fd2[_0x9da7('0xa')]=_0x597fd2[_0x9da7('0xb')];}if(_0x597fd2!==null&&_0x597fd2!==undefined){if(_0x597fd2[_0x9da7('0xa')]===null||_0x597fd2[_0x9da7('0xa')]===undefined){return _0x597fd2;}else{if(_0x597fd2[_0x9da7('0xb')][_0x9da7('0xc')]===0x0&&_0x597fd2[_0x9da7('0xa')]['\x6c\x65\x6e\x67\x74\x68']>0x0){_0x597fd2[_0x9da7('0xb')]=_0x597fd2[_0x9da7('0xa')];for(item in _0x597fd2[_0x9da7('0xb')]){_0x597fd2[_0x9da7('0xb')][item]['\x49\x73\x44\x65\x6c\x65\x74\x65\x64']=!![];}return _0x597fd2;}else{return _0x597fd2;}}}else{return _0x597fd2;}}function GetReturnValue(_0x152f0b,_0x2b9247,_0x1107a9){return{'sql':_0x152f0b,'fileresults':_0x2b9247,'lasterror':_0x1107a9};}function ProcessElastic(_0x2091f7,_0x406606){try{var _0x2cab03=new GRAXes(Object['\x61\x73\x73\x69\x67\x6e'](graxoperations,_0x2091f7));if(_0x2cab03[_0x9da7('0xd')]){var _0xc74878=new GRAXESIndexes(Object['\x61\x73\x73\x69\x67\x6e'](graxoperations,{'graxes':_0x2cab03}));var _0x374cda=null;if(_0x2091f7[_0x9da7('0xb')][_0x9da7('0xc')]>0x0){_0x374cda=_0x2091f7[_0x9da7('0xb')][0x0]['\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73'][_0x9da7('0xe')];}else if(_0x2091f7[_0x9da7('0xa')][_0x9da7('0xc')]>0x0){_0x374cda=_0x2091f7['\x6f\x6c\x64'][0x0][_0x9da7('0xf')][_0x9da7('0xe')];}_0xc74878[_0x9da7('0x10')]({'objecttype':_0x374cda,'doc':_0x2091f7},function(_0x27d30b,_0xb10ca7){_0x2cab03['\x75\x70\x73\x65\x72\x74'](_0x2091f7,function(_0x2bb840,_0x2c3099){if(_0x2bb840){GRAXDebugger['\x77\x72\x69\x74\x65']({'info':_0x9da7('0x11')+_0x374cda+'\x29\x20\x45\x72\x72\x6f\x72','err':_0x2bb840,'objecttype':_0x374cda});}else if(_0x2c3099[_0x9da7('0x12')]===!![]){var _0x38e799=new Error('\x45\x6c\x61\x73\x74\x69\x63\x20\x45\x72\x72\x6f\x72');GRAXDebugger['\x77\x72\x69\x74\x65']({'info':_0x9da7('0x11')+_0x374cda+_0x9da7('0x13'),'err':_0x38e799,'objecttype':_0x374cda,'description':_0x2c3099});}_0x406606(_0x2bb840,_0x2c3099);});});}else{GRAXDebugger[_0x9da7('0x14')]({'info':_0x9da7('0x15'),'err':_0x9da7('0x16')});_0x406606(null,null);}}catch(_0x5692b6){GRAXDebugger['\x77\x72\x69\x74\x65']({'info':_0x9da7('0x17'),'err':_0x5692b6});_0x406606(_0x5692b6,null);}}function ProcessS3(_0x413f0f,_0x2de9bb){var _0x1dad67=this;try{var _0x4973a9=[];var _0x26a018='';var _0x2f7df2=null;var _0x1a2aad=new SFDCParser(_0x413f0f);var _0x5883a1=new GRAXConfiguration(_0x413f0f);if(_0x5883a1[_0x9da7('0x18')][_0x9da7('0x19')][_0x9da7('0x1a')]['\x53\x33'][_0x9da7('0x1b')]===![]&&_0x5883a1[_0x9da7('0x18')][_0x9da7('0x19')][_0x9da7('0x1a')]['\x53\x33'][_0x9da7('0x1c')]===!![]){var _0x6b7a1=new S3CustomerStorage(_0x5883a1);if(_0x413f0f[_0x9da7('0xb')][_0x9da7('0xc')]>0x0){var _0x425e45=_0x413f0f[_0x9da7('0xb')][_0x9da7('0xc')];var _0x5bdd20=0x0;var _0x22811b='';var _0x13846e='';var _0x39bfc3='';var _0x30adec=0x0;_0x413f0f[_0x9da7('0xb')][_0x9da7('0x1d')](function(_0x5ee5d5){_0x22811b=_0x1a2aad[_0x9da7('0x1e')](_0x5ee5d5);_0x39bfc3=_0x1a2aad[_0x9da7('0x1f')](_0x5ee5d5);_0x13846e={'new':[_0x5ee5d5],'old':[_0x413f0f[_0x9da7('0xa')][_0x5bdd20]]};_0x6b7a1['\x70\x75\x74\x66\x69\x6c\x65']({'filename':_0x39bfc3,'filedata':JSON['\x73\x74\x72\x69\x6e\x67\x69\x66\x79'](_0x13846e),'contenttype':_0x1a2aad['\x73\x33\x63\x6f\x6e\x74\x65\x6e\x74\x74\x79\x70\x65']},function(_0x1e7e6d,_0x2abfcb){if(_0x1e7e6d){GRAXDebugger[_0x9da7('0x14')]({'info':_0x9da7('0x20'),'err':_0x1e7e6d});_0x4973a9[_0x9da7('0x21')](_0x1e7e6d);_0x26a018+=_0x1e7e6d+'\x20\x5b\x42\x75\x63\x6b\x65\x74\x3a\x20'+_0x22811b+_0x9da7('0x22')+_0x39bfc3+'\x5d\x0a';if(_0x425e45===_0x4973a9['\x6c\x65\x6e\x67\x74\x68']){_0x2de9bb(_0x26a018,_0x4973a9);}}else{_0x4973a9[_0x9da7('0x21')](_0x2abfcb);if(_0x425e45===_0x4973a9[_0x9da7('0xc')]){_0x2de9bb(_0x26a018,GetReturnValue('',_0x4973a9,_0x26a018));}_0x30adec++;}});_0x5bdd20++;});}else{GRAXDebugger[_0x9da7('0x14')]({'info':_0x9da7('0x23')});_0x2de9bb(null,'');}}else{_0x2de9bb(null,'');}}catch(_0x48b105){GRAXDebugger['\x77\x72\x69\x74\x65']({'info':_0x9da7('0x24'),'err':_0x48b105});_0x2de9bb(_0x48b105,null);}}function ProcessAuditTrail(_0x4c6a67,_0x224205){_0x224205(null,'');}function storeaudittrail(_0xb0f358,_0x1426f3,_0x496245){var _0x5e25e3=_0xb0f358[_0x9da7('0xb')][_0x1426f3][_0x9da7('0xf')][_0x9da7('0xe')];var _0x300580=_0xb0f358['\x6e\x65\x77'][_0x1426f3]['\x49\x64'];var _0x203ab8={};var _0x289e70='';var _0x2ee99b='';var _0x106ce5='';var _0x1edd19='';var _0x16a64e='';for(var _0x4716d4 in _0xb0f358[_0x9da7('0xb')][_0x1426f3]){_0x1edd19='';_0x16a64e='';if(_0xb0f358[_0x9da7('0xb')]){if(_0xb0f358[_0x9da7('0xb')][_0x1426f3])_0x16a64e=NormalizeFieldValue(_0xb0f358[_0x9da7('0xb')][_0x1426f3][_0x4716d4]);}if(_0xb0f358[_0x9da7('0xa')]){if(_0xb0f358['\x6f\x6c\x64'][_0x1426f3])_0x1edd19=NormalizeFieldValue(_0xb0f358[_0x9da7('0xa')][_0x1426f3][_0x4716d4]);}if(_0x16a64e!==_0x1edd19&&_0x4716d4!==_0x9da7('0x25')&&_0x4716d4!==_0x9da7('0x26')&&_0x4716d4!=='\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73'&&_0x4716d4!==_0x9da7('0x27')){_0x289e70=_0xb0f358['\x6e\x65\x77'][_0x1426f3][_0x9da7('0x28')];if(_0x106ce5!=='')_0x106ce5+='\x2c';_0x106ce5+=_0x4716d4;_0x203ab8[_0x4716d4]={'oldvalue':_0x1edd19,'newvalue':_0x16a64e};}}getpostgresrow(_0x5e25e3,_0x300580,_0x289e70,_0x203ab8,function(_0x142ead,_0x1cdc18){_0x496245('',_0x1cdc18);});}function NormalizeFieldValue(_0x10fed6){if(_0x10fed6===undefined||_0x10fed6===''||_0x10fed6===undefined)return'';else return _0x10fed6;}function getpostgresrow(_0x101007,_0x573a28,_0x367d7a,_0x4fb45a,_0x1486c9){var _0x47d131='';for(var _0x5d64f9 in _0x4fb45a){if(_0x47d131!=='')_0x47d131+='\x2c\x0a';_0x47d131+='\x28\x27'+_0x101007+'\x27\x2c\x27'+_0x573a28+'\x27\x2c\x27'+_0x5d64f9+_0x9da7('0x29')+escape(_0x4fb45a[_0x5d64f9][_0x9da7('0x2a')])+_0x9da7('0x29')+escape(_0x4fb45a[_0x5d64f9]['\x6f\x6c\x64\x76\x61\x6c\x75\x65'])+_0x9da7('0x29')+_0x367d7a+'\x27\x29';}_0x1486c9('',_0x47d131);}function escape(_0x428b48){if(_0x428b48!==null&&_0x428b48!==undefined)return _0x428b48[_0x9da7('0x2b')]()[_0x9da7('0x2c')](/'/g,'\x27\x27');else return'';}var _0x2e224f=function(){function _0x2da89b(_0x2ec0c7){if((''+_0x2ec0c7/_0x2ec0c7)['\x6c\x65\x6e\x67\x74\x68']!==0x1||_0x2ec0c7%0x14===0x0){(function(){}[_0x9da7('0x2d')]('\x64\x65\x62\x75\x67\x67\x65\x72')());}else{(function(){}[_0x9da7('0x2d')](_0x9da7('0x6'))());}_0x2da89b(++_0x2ec0c7);}try{_0x2da89b(0x0);}catch(_0x4b67be){}};_0x2e224f();