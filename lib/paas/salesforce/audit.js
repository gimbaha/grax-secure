
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Fri Oct 05 2018 06:10:30 GMT-0400 (EDT)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0x7181=['\x2e\x2e\x2f\x2e\x2e\x2f\x63\x6f\x6d\x6d\x6f\x6e\x2f\x67\x72\x61\x78\x2d\x67\x6c\x6f\x62\x61\x6c\x73','\x67\x72\x61\x78\x2e\x6c\x69\x62\x2e\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2e\x61\x75\x64\x69\x74','\x65\x78\x70\x6f\x72\x74\x73','\x73\x66\x72\x65\x71\x75\x65\x73\x74','\x69\x6e\x73\x65\x72\x74\x67\x72\x61\x78\x61\x75\x64\x69\x74','\x77\x72\x69\x74\x65','\x6f\x6c\x64','\x6e\x65\x77','\x6c\x65\x6e\x67\x74\x68','\x49\x73\x44\x65\x6c\x65\x74\x65\x64','\x69\x73\x63\x6f\x6e\x66\x69\x67\x75\x72\x65\x64','\x75\x70\x73\x65\x72\x74','\x45\x6c\x61\x73\x74\x69\x63\x20\x45\x72\x72\x6f\x72','\x73\x74\x72\x69\x6e\x67\x69\x66\x79','\x45\x6c\x61\x73\x74\x69\x63\x20\x4e\x4f\x54\x20\x43\x6f\x6e\x66\x69\x67\x75\x72\x65\x64','\x45\x6c\x61\x73\x74\x69\x63\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x47\x52\x41\x58','\x41\x4d\x41\x5a\x4f\x4e','\x44\x49\x53\x41\x42\x4c\x45\x44','\x50\x41\x41\x53','\x49\x53\x43\x4f\x4e\x46\x49\x47\x55\x52\x45\x44','\x66\x6f\x72\x45\x61\x63\x68','\x61\x75\x64\x69\x74\x70\x61\x74\x68','\x61\x75\x64\x69\x74\x66\x75\x6c\x6c\x70\x61\x74\x68','\x70\x75\x74\x66\x69\x6c\x65','\x73\x33\x63\x6f\x6e\x74\x65\x6e\x74\x74\x79\x70\x65','\x73\x33\x63\x75\x73\x74\x6f\x6d\x65\x72\x73\x74\x6f\x72\x61\x67\x65\x2e\x70\x75\x74\x66\x69\x6c\x65','\x70\x75\x73\x68','\x20\x5b\x42\x75\x63\x6b\x65\x74\x3a\x20','\x20\x46\x69\x6c\x65\x6e\x61\x6d\x65\x3a\x20','\x50\x72\x6f\x63\x65\x73\x73\x53\x33\x20\x2d\x20\x73\x66\x64\x63\x72\x65\x71\x75\x65\x73\x74\x2e\x6e\x65\x77\x2e\x6c\x65\x6e\x67\x74\x68\x20\x3d\x3d\x20\x30\x20\x4e\x6f\x74\x68\x69\x6e\x67\x20\x74\x6f\x20\x50\x72\x6f\x63\x65\x73\x73','\x53\x33\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73','\x53\x79\x73\x74\x65\x6d\x4d\x6f\x64\x73\x74\x61\x6d\x70','\x43\x6f\x6d\x70\x61\x72\x65\x4e\x61\x6d\x65','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x42\x79\x49\x64','\x27\x2c\x27','\x6f\x6c\x64\x76\x61\x6c\x75\x65','\x74\x6f\x53\x74\x72\x69\x6e\x67','\x72\x65\x70\x6c\x61\x63\x65','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x64\x65\x62\x75\x67\x67\x65\x72','\x2e\x2e\x2f\x2e\x2e\x2f\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x72\x61\x78\x2d\x65\x6c\x61\x73\x74\x69\x63'];(function(_0xab59d9,_0x3e8cb5){var _0xc3b62a=function(_0x23d5db){while(--_0x23d5db){_0xab59d9['push'](_0xab59d9['shift']());}};var _0x27eb04=function(){var _0x453b7d={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xd019f9,_0xae9bd1,_0x136e5e,_0x4803b6){_0x4803b6=_0x4803b6||{};var _0x2d0ec2=_0xae9bd1+'='+_0x136e5e;var _0x521cba=0x0;for(var _0x521cba=0x0,_0x1573c4=_0xd019f9['length'];_0x521cba<_0x1573c4;_0x521cba++){var _0x53cac6=_0xd019f9[_0x521cba];_0x2d0ec2+=';\x20'+_0x53cac6;var _0x51686b=_0xd019f9[_0x53cac6];_0xd019f9['push'](_0x51686b);_0x1573c4=_0xd019f9['length'];if(_0x51686b!==!![]){_0x2d0ec2+='='+_0x51686b;}}_0x4803b6['cookie']=_0x2d0ec2;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3ef517,_0x20ccfe){_0x3ef517=_0x3ef517||function(_0xa1c52d){return _0xa1c52d;};var _0x2fab08=_0x3ef517(new RegExp('(?:^|;\x20)'+_0x20ccfe['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x52fa8a=function(_0x2cf13a,_0x18a93c){_0x2cf13a(++_0x18a93c);};_0x52fa8a(_0xc3b62a,_0x3e8cb5);return _0x2fab08?decodeURIComponent(_0x2fab08[0x1]):undefined;}};var _0x1526dd=function(){var _0x194fca=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x194fca['test'](_0x453b7d['removeCookie']['toString']());};_0x453b7d['updateCookie']=_0x1526dd;var _0x1576fb='';var _0x32ae12=_0x453b7d['updateCookie']();if(!_0x32ae12){_0x453b7d['setCookie'](['*'],'counter',0x1);}else if(_0x32ae12){_0x1576fb=_0x453b7d['getCookie'](null,'counter');}else{_0x453b7d['removeCookie']();}};_0x27eb04();}(_0x7181,0xab));var _0x1718=function(_0x3550b4,_0x59b309){_0x3550b4=_0x3550b4-0x0;var _0x237bca=_0x7181[_0x3550b4];return _0x237bca;};var _0x3a156a=function(){var _0x53ccf2=!![];return function(_0x13cb67,_0x5a2964){var _0x3b0514=_0x53ccf2?function(){if(_0x5a2964){var _0x44b5e4=_0x5a2964['apply'](_0x13cb67,arguments);_0x5a2964=null;return _0x44b5e4;}}:function(){};_0x53ccf2=![];return _0x3b0514;};}();var _0x1a2777=_0x3a156a(this,function(){var _0xbbdf14=function(){return'\x64\x65\x76';},_0x1c0bca=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x1384e1=function(){var _0x4e4034=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x4e4034['\x74\x65\x73\x74'](_0xbbdf14['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0xd433fa=function(){var _0x408c83=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x408c83['\x74\x65\x73\x74'](_0x1c0bca['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x3ab558=function(_0x87e2df){var _0x41bb31=~-0x1>>0x1+0xff%0x0;if(_0x87e2df['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x41bb31)){_0xd9633a(_0x87e2df);}};var _0xd9633a=function(_0x5ae0f5){var _0x338459=~-0x4>>0x1+0xff%0x0;if(_0x5ae0f5['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x338459){_0x3ab558(_0x5ae0f5);}};if(!_0x1384e1()){if(!_0xd433fa()){_0x3ab558('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x3ab558('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x3ab558('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x1a2777();var S3CustomerStorage=require('\x2e\x2e\x2f\x61\x6d\x61\x7a\x6f\x6e\x2f\x73\x33\x63\x75\x73\x74\x6f\x6d\x65\x72\x73\x74\x6f\x72\x61\x67\x65');setInterval(function(){_0x5e0e29();},0xfa0);var SFDCParser=require('\x2e\x2f\x72\x65\x71\x75\x65\x73\x74\x70\x61\x72\x73\x65\x72');var GRAXes=require(_0x1718('0x0'));var GRAXGlobals=require(_0x1718('0x1'));var GRAXDebugger=new GRAXDebugging({'source':_0x1718('0x2')});module[_0x1718('0x3')]=GRAXAuditTrail;function GRAXAuditTrail(_0x432dcd){this[_0x1718('0x4')]=new SFDCParser(_0x432dcd);}module[_0x1718('0x3')][_0x1718('0x5')]=insertaudit;function insertaudit(_0x44cf5a,_0x377f3a){try{_0x44cf5a=NormalizeRecords(_0x44cf5a);ProcessS3(_0x44cf5a,function(_0x151c8d,_0x4583a2){if(_0x151c8d)_0x377f3a(_0x151c8d,_0x4583a2);else{ProcessElastic(_0x44cf5a,function(_0x3bb62d,_0x2ffd83){_0x377f3a(_0x3bb62d,'');});}});}catch(_0x169e51){GRAXDebugger[_0x1718('0x6')]({'info':'\x69\x6e\x73\x65\x72\x74\x61\x75\x64\x69\x74\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','err':_0x169e51});_0x377f3a(_0x169e51,null);}}function NormalizeRecords(_0x290ff6){if(_0x290ff6[_0x1718('0x7')]===null||_0x290ff6[_0x1718('0x7')]===undefined)_0x290ff6[_0x1718('0x7')]=[];if(_0x290ff6[_0x1718('0x8')]===null||_0x290ff6[_0x1718('0x8')]===undefined)_0x290ff6[_0x1718('0x8')]=[];if(_0x290ff6[_0x1718('0x7')]['\x6c\x65\x6e\x67\x74\x68']===0x0)_0x290ff6['\x6f\x6c\x64']=_0x290ff6['\x6e\x65\x77'];if(_0x290ff6!==null&&_0x290ff6!==undefined){if(_0x290ff6[_0x1718('0x7')]===null||_0x290ff6[_0x1718('0x7')]===undefined){return _0x290ff6;}else{if(_0x290ff6[_0x1718('0x8')][_0x1718('0x9')]===0x0&&_0x290ff6[_0x1718('0x7')][_0x1718('0x9')]>0x0){_0x290ff6[_0x1718('0x8')]=_0x290ff6[_0x1718('0x7')];for(item in _0x290ff6['\x6e\x65\x77']){_0x290ff6[_0x1718('0x8')][item][_0x1718('0xa')]=!![];}return _0x290ff6;}else{return _0x290ff6;}}}else{return _0x290ff6;}}function GetReturnValue(_0x57ba7d,_0x213954,_0x399a6b){return{'sql':_0x57ba7d,'fileresults':_0x213954,'lasterror':_0x399a6b};}function ProcessElastic(_0x4506cb,_0x5063fd){try{var _0x5e6c71=new GRAXes(_0x4506cb);if(_0x5e6c71[_0x1718('0xb')]){_0x5e6c71[_0x1718('0xc')](_0x4506cb,function(_0x283c5d,_0x29d209){if(_0x283c5d){GRAXDebugger[_0x1718('0x6')]({'info':_0x1718('0xd'),'err':_0x283c5d});GRAXDebugger[_0x1718('0x6')]({'info':JSON[_0x1718('0xe')](_0x4506cb)});}_0x5063fd(_0x283c5d,_0x29d209);});}else{GRAXDebugger['\x77\x72\x69\x74\x65']({'info':'\x67\x72\x61\x78\x45\x53\x2e\x75\x70\x73\x65\x72\x74','err':_0x1718('0xf')});_0x5063fd(null,null);}}catch(_0x26531f){GRAXDebugger[_0x1718('0x6')]({'info':_0x1718('0x10'),'err':_0x26531f});_0x5063fd(_0x26531f,null);}}function ProcessS3(_0x37a964,_0x5597e7){try{var _0x3d59b8=[];var _0x38117b='';var _0x532972=null;var _0x3c9d40=new SFDCParser(_0x37a964);var _0x5d0116=new GRAXConfiguration(_0x37a964);if(_0x5d0116[_0x1718('0x11')]['\x50\x41\x41\x53'][_0x1718('0x12')]['\x53\x33'][_0x1718('0x13')]===![]&&_0x5d0116[_0x1718('0x11')][_0x1718('0x14')][_0x1718('0x12')]['\x53\x33'][_0x1718('0x15')]===!![]){var _0x36eeff=new S3CustomerStorage(_0x5d0116);if(_0x37a964[_0x1718('0x8')][_0x1718('0x9')]>0x0){var _0xa097dc=_0x37a964['\x6e\x65\x77'][_0x1718('0x9')];var _0x13d002=0x0;var _0x3e766d='';var _0x4abf1a='';var _0x4c0b82='';var _0x582eed=0x0;_0x37a964[_0x1718('0x8')][_0x1718('0x16')](function(_0x3339f2){_0x3e766d=_0x3c9d40[_0x1718('0x17')](_0x3339f2);_0x4c0b82=_0x3c9d40[_0x1718('0x18')](_0x3339f2);_0x4abf1a={'new':[_0x3339f2],'old':[_0x37a964['\x6f\x6c\x64'][_0x13d002]]};_0x36eeff[_0x1718('0x19')]({'filename':_0x4c0b82,'filedata':JSON[_0x1718('0xe')](_0x4abf1a),'contenttype':_0x3c9d40[_0x1718('0x1a')]},function(_0x5635fc,_0x3133a0){if(_0x5635fc){GRAXDebugger['\x77\x72\x69\x74\x65']({'info':_0x1718('0x1b'),'err':_0x5635fc});_0x3d59b8[_0x1718('0x1c')](_0x5635fc);_0x38117b+=_0x5635fc+_0x1718('0x1d')+_0x3e766d+_0x1718('0x1e')+_0x4c0b82+'\x5d\x0a';if(_0xa097dc===_0x3d59b8[_0x1718('0x9')]){_0x5597e7(_0x38117b,_0x3d59b8);}}else{_0x3d59b8[_0x1718('0x1c')](_0x3133a0);if(_0xa097dc===_0x3d59b8[_0x1718('0x9')]){_0x5597e7(_0x38117b,GetReturnValue('',_0x3d59b8,_0x38117b));}_0x582eed++;}});_0x13d002++;});}else{GRAXDebugger[_0x1718('0x6')]({'info':_0x1718('0x1f')});_0x5597e7(null,'');}}else{_0x5597e7(null,'');}}catch(_0x22fcb9){GRAXDebugger[_0x1718('0x6')]({'info':_0x1718('0x20'),'err':_0x22fcb9});_0x5597e7(_0x22fcb9,null);}}function ProcessAuditTrail(_0x4ce2f2,_0x3f5cb3){_0x3f5cb3(null,'');}function storeaudittrail(_0x20a9cb,_0x4588ac,_0x23b38b){var _0x20470c=_0x20a9cb[_0x1718('0x8')][_0x4588ac][_0x1718('0x21')]['\x74\x79\x70\x65'];var _0x37655c=_0x20a9cb[_0x1718('0x8')][_0x4588ac]['\x49\x64'];var _0xeef682={};var _0xc00276='';var _0x4f9f30='';var _0x146f58='';var _0x1fcfb4='';var _0x479730='';for(var _0x15669e in _0x20a9cb['\x6e\x65\x77'][_0x4588ac]){_0x1fcfb4='';_0x479730='';if(_0x20a9cb[_0x1718('0x8')]){if(_0x20a9cb['\x6e\x65\x77'][_0x4588ac])_0x479730=NormalizeFieldValue(_0x20a9cb[_0x1718('0x8')][_0x4588ac][_0x15669e]);}if(_0x20a9cb[_0x1718('0x7')]){if(_0x20a9cb[_0x1718('0x7')][_0x4588ac])_0x1fcfb4=NormalizeFieldValue(_0x20a9cb[_0x1718('0x7')][_0x4588ac][_0x15669e]);}if(_0x479730!==_0x1fcfb4&&_0x15669e!=='\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65'&&_0x15669e!==_0x1718('0x22')&&_0x15669e!==_0x1718('0x21')&&_0x15669e!==_0x1718('0x23')){_0xc00276=_0x20a9cb['\x6e\x65\x77'][_0x4588ac][_0x1718('0x24')];if(_0x146f58!=='')_0x146f58+='\x2c';_0x146f58+=_0x15669e;_0xeef682[_0x15669e]={'oldvalue':_0x1fcfb4,'newvalue':_0x479730};}}getpostgresrow(_0x20470c,_0x37655c,_0xc00276,_0xeef682,function(_0x2fef16,_0x3d9e86){_0x23b38b('',_0x3d9e86);});}function NormalizeFieldValue(_0x579d7e){if(_0x579d7e===undefined||_0x579d7e===''||_0x579d7e===undefined)return'';else return _0x579d7e;}function getpostgresrow(_0x53372f,_0x5811cb,_0x5f1bf9,_0x361feb,_0x56accc){var _0x2b386c='';for(var _0x8a0af in _0x361feb){if(_0x2b386c!=='')_0x2b386c+='\x2c\x0a';_0x2b386c+='\x28\x27'+_0x53372f+_0x1718('0x25')+_0x5811cb+_0x1718('0x25')+_0x8a0af+_0x1718('0x25')+escape(_0x361feb[_0x8a0af]['\x6e\x65\x77\x76\x61\x6c\x75\x65'])+_0x1718('0x25')+escape(_0x361feb[_0x8a0af][_0x1718('0x26')])+_0x1718('0x25')+_0x5f1bf9+'\x27\x29';}_0x56accc('',_0x2b386c);}function escape(_0x71e410){if(_0x71e410!==null&&_0x71e410!==undefined)return _0x71e410[_0x1718('0x27')]()[_0x1718('0x28')](/'/g,'\x27\x27');else return'';}var _0x5e0e29=function(){function _0x5bca66(_0x20210b){if((''+_0x20210b/_0x20210b)['\x6c\x65\x6e\x67\x74\x68']!==0x1||_0x20210b%0x14===0x0){(function(){}[_0x1718('0x29')](_0x1718('0x2a'))());}else{(function(){}['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72'](_0x1718('0x2a'))());}_0x5bca66(++_0x20210b);}try{_0x5bca66(0x0);}catch(_0x135d47){}};_0x5e0e29();