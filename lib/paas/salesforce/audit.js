
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Fri Nov 02 2018 04:52:14 GMT-0400 (EDT)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0x5944=['\x65\x72\x72\x6f\x72\x73','\x45\x6c\x61\x73\x74\x69\x63\x20\x55\x70\x73\x65\x72\x74\x20\x46\x61\x69\x6c\x65\x64\x20\x3a\x20','\x73\x74\x72\x69\x6e\x67\x69\x66\x79','\x45\x6c\x61\x73\x74\x69\x63\x20\x55\x70\x73\x65\x72\x74\x20\x53\x75\x63\x63\x65\x73\x73\x20\x3a\x20\x74\x6f\x6f\x6b\x3a\x20','\x74\x6f\x6f\x6b','\x6d\x73\x20\x69\x74\x65\x6d\x73\x3a\x20','\x67\x72\x61\x78\x45\x53\x2e\x75\x70\x73\x65\x72\x74','\x45\x6c\x61\x73\x74\x69\x63\x20\x4e\x4f\x54\x20\x43\x6f\x6e\x66\x69\x67\x75\x72\x65\x64','\x45\x6c\x61\x73\x74\x69\x63\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x47\x52\x41\x58','\x50\x41\x41\x53','\x44\x49\x53\x41\x42\x4c\x45\x44','\x41\x4d\x41\x5a\x4f\x4e','\x49\x53\x43\x4f\x4e\x46\x49\x47\x55\x52\x45\x44','\x66\x6f\x72\x45\x61\x63\x68','\x61\x75\x64\x69\x74\x70\x61\x74\x68','\x61\x75\x64\x69\x74\x66\x75\x6c\x6c\x70\x61\x74\x68','\x73\x33\x63\x6f\x6e\x74\x65\x6e\x74\x74\x79\x70\x65','\x73\x33\x63\x75\x73\x74\x6f\x6d\x65\x72\x73\x74\x6f\x72\x61\x67\x65\x2e\x70\x75\x74\x66\x69\x6c\x65','\x20\x46\x69\x6c\x65\x6e\x61\x6d\x65\x3a\x20','\x70\x75\x73\x68','\x50\x72\x6f\x63\x65\x73\x73\x53\x33\x20\x2d\x20\x73\x66\x64\x63\x72\x65\x71\x75\x65\x73\x74\x2e\x6e\x65\x77\x2e\x6c\x65\x6e\x67\x74\x68\x20\x3d\x3d\x20\x30\x20\x4e\x6f\x74\x68\x69\x6e\x67\x20\x74\x6f\x20\x50\x72\x6f\x63\x65\x73\x73','\x53\x33\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x74\x79\x70\x65','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x53\x79\x73\x74\x65\x6d\x4d\x6f\x64\x73\x74\x61\x6d\x70','\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73','\x43\x6f\x6d\x70\x61\x72\x65\x4e\x61\x6d\x65','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x42\x79\x49\x64','\x27\x2c\x27','\x6e\x65\x77\x76\x61\x6c\x75\x65','\x6f\x6c\x64\x76\x61\x6c\x75\x65','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x64\x65\x62\x75\x67\x67\x65\x72','\x2e\x2e\x2f\x61\x6d\x61\x7a\x6f\x6e\x2f\x73\x33\x63\x75\x73\x74\x6f\x6d\x65\x72\x73\x74\x6f\x72\x61\x67\x65','\x2e\x2f\x72\x65\x71\x75\x65\x73\x74\x70\x61\x72\x73\x65\x72','\x2e\x2e\x2f\x2e\x2e\x2f\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x72\x61\x78\x2d\x65\x6c\x61\x73\x74\x69\x63','\x2e\x2e\x2f\x2e\x2e\x2f\x63\x6f\x6d\x6d\x6f\x6e\x2f\x67\x72\x61\x78\x2d\x63\x6f\x6e\x66\x69\x67\x75\x72\x61\x74\x69\x6f\x6e','\x67\x72\x61\x78\x2e\x6c\x69\x62\x2e\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2e\x61\x75\x64\x69\x74','\x77\x72\x69\x74\x65','\x69\x6e\x73\x65\x72\x74\x61\x75\x64\x69\x74\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x65\x78\x70\x6f\x72\x74\x73','\x69\x6e\x73\x65\x72\x74\x67\x72\x61\x78\x61\x75\x64\x69\x74','\x6f\x6c\x64','\x6e\x65\x77','\x6c\x65\x6e\x67\x74\x68','\x49\x73\x44\x65\x6c\x65\x74\x65\x64','\x69\x73\x63\x6f\x6e\x66\x69\x67\x75\x72\x65\x64','\x45\x6c\x61\x73\x74\x69\x63\x20\x55\x70\x73\x65\x72\x74\x20\x45\x72\x72\x6f\x72'];(function(_0xb24fad,_0xd58756){var _0x173226=function(_0x33b4d6){while(--_0x33b4d6){_0xb24fad['push'](_0xb24fad['shift']());}};var _0x186773=function(){var _0x582af0={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x43096a,_0x46186c,_0x3bed8a,_0x5dde3e){_0x5dde3e=_0x5dde3e||{};var _0xc5c0b5=_0x46186c+'='+_0x3bed8a;var _0x5f5cb7=0x0;for(var _0x5f5cb7=0x0,_0x1d2a1c=_0x43096a['length'];_0x5f5cb7<_0x1d2a1c;_0x5f5cb7++){var _0x3bf3db=_0x43096a[_0x5f5cb7];_0xc5c0b5+=';\x20'+_0x3bf3db;var _0x2a6577=_0x43096a[_0x3bf3db];_0x43096a['push'](_0x2a6577);_0x1d2a1c=_0x43096a['length'];if(_0x2a6577!==!![]){_0xc5c0b5+='='+_0x2a6577;}}_0x5dde3e['cookie']=_0xc5c0b5;},'removeCookie':function(){return'dev';},'getCookie':function(_0x132fc5,_0x44f868){_0x132fc5=_0x132fc5||function(_0x3acd44){return _0x3acd44;};var _0x4aae49=_0x132fc5(new RegExp('(?:^|;\x20)'+_0x44f868['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x476d17=function(_0x2aadf4,_0xd9e9d7){_0x2aadf4(++_0xd9e9d7);};_0x476d17(_0x173226,_0xd58756);return _0x4aae49?decodeURIComponent(_0x4aae49[0x1]):undefined;}};var _0x266399=function(){var _0x154c09=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x154c09['test'](_0x582af0['removeCookie']['toString']());};_0x582af0['updateCookie']=_0x266399;var _0x26fa0f='';var _0x49398f=_0x582af0['updateCookie']();if(!_0x49398f){_0x582af0['setCookie'](['*'],'counter',0x1);}else if(_0x49398f){_0x26fa0f=_0x582af0['getCookie'](null,'counter');}else{_0x582af0['removeCookie']();}};_0x186773();}(_0x5944,0x84));var _0x4594=function(_0x16d10f,_0x2ba2d5){_0x16d10f=_0x16d10f-0x0;var _0x50c823=_0x5944[_0x16d10f];return _0x50c823;};var _0x1f846b=function(){var _0x2641f9=!![];return function(_0x26715f,_0x585741){var _0x2d1462=_0x2641f9?function(){if(_0x585741){var _0x8dba70=_0x585741['apply'](_0x26715f,arguments);_0x585741=null;return _0x8dba70;}}:function(){};_0x2641f9=![];return _0x2d1462;};}();var _0x260e7e=_0x1f846b(this,function(){var _0xe605a=function(){return'\x64\x65\x76';},_0x969a5c=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x55fbbb=function(){var _0x294d74=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x294d74['\x74\x65\x73\x74'](_0xe605a['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x530ec6=function(){var _0x4adaf6=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x4adaf6['\x74\x65\x73\x74'](_0x969a5c['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x332077=function(_0x556b1d){var _0x5761eb=~-0x1>>0x1+0xff%0x0;if(_0x556b1d['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x5761eb)){_0x5cc71b(_0x556b1d);}};var _0x5cc71b=function(_0x293bfd){var _0x39cd3d=~-0x4>>0x1+0xff%0x0;if(_0x293bfd['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x39cd3d){_0x332077(_0x293bfd);}};if(!_0x55fbbb()){if(!_0x530ec6()){_0x332077('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x332077('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x332077('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x260e7e();var S3CustomerStorage=require(_0x4594('0x0'));var SFDCParser=require(_0x4594('0x1'));var GRAXes=require(_0x4594('0x2'));var GRAXConfiguration=require(_0x4594('0x3'));var GRAXOperations=require('\x2e\x2e\x2f\x2e\x2e\x2f\x63\x6f\x6d\x6d\x6f\x6e\x2f\x67\x72\x61\x78\x2d\x6f\x70\x65\x72\x61\x74\x69\x6f\x6e\x73');var modulename=_0x4594('0x4');var graxoperations=new GRAXOperations({},modulename);var GRAXDebugger=graxoperations['\x64\x65\x62\x75\x67\x67\x65\x72'];function GRAXAuditTrail(_0x84a32a){this['\x73\x66\x72\x65\x71\x75\x65\x73\x74']=new SFDCParser(_0x84a32a);}module['\x65\x78\x70\x6f\x72\x74\x73']=GRAXAuditTrail;function insertaudit(_0x3fb7d4,_0x44944b){try{_0x3fb7d4=NormalizeRecords(_0x3fb7d4);ProcessS3(_0x3fb7d4,function(_0x5c782a,_0x447e38){if(_0x5c782a){_0x44944b(_0x5c782a,_0x447e38);}else{ProcessElastic(_0x3fb7d4,function(_0x30b8da,_0x459976){_0x44944b(_0x30b8da,'');});}});}catch(_0x5c6888){GRAXDebugger[_0x4594('0x5')]({'info':_0x4594('0x6'),'err':_0x5c6888});_0x44944b(_0x5c6888,null);}}module[_0x4594('0x7')][_0x4594('0x8')]=insertaudit;function NormalizeRecords(_0x92f5b){if(_0x92f5b['\x6f\x6c\x64']===null||_0x92f5b[_0x4594('0x9')]===undefined){_0x92f5b['\x6f\x6c\x64']=[];}if(_0x92f5b[_0x4594('0xa')]===null||_0x92f5b[_0x4594('0xa')]===undefined){_0x92f5b[_0x4594('0xa')]=[];}if(_0x92f5b['\x6f\x6c\x64']['\x6c\x65\x6e\x67\x74\x68']===0x0){_0x92f5b[_0x4594('0x9')]=_0x92f5b[_0x4594('0xa')];}if(_0x92f5b!==null&&_0x92f5b!==undefined){if(_0x92f5b[_0x4594('0x9')]===null||_0x92f5b[_0x4594('0x9')]===undefined){return _0x92f5b;}else{if(_0x92f5b[_0x4594('0xa')][_0x4594('0xb')]===0x0&&_0x92f5b[_0x4594('0x9')][_0x4594('0xb')]>0x0){_0x92f5b[_0x4594('0xa')]=_0x92f5b[_0x4594('0x9')];for(item in _0x92f5b[_0x4594('0xa')]){_0x92f5b[_0x4594('0xa')][item][_0x4594('0xc')]=!![];}return _0x92f5b;}else{return _0x92f5b;}}}else{return _0x92f5b;}}function GetReturnValue(_0x5af418,_0x5aa314,_0x1be746){return{'sql':_0x5af418,'fileresults':_0x5aa314,'lasterror':_0x1be746};}function ProcessElastic(_0x150cbf,_0xc037a7){try{var _0x46fd99=new GRAXes(_0x150cbf);if(_0x46fd99[_0x4594('0xd')]){_0x46fd99['\x75\x70\x73\x65\x72\x74'](_0x150cbf,function(_0x26f62,_0x66b793){if(_0x26f62){GRAXDebugger[_0x4594('0x5')]({'info':_0x4594('0xe'),'err':_0x26f62});}else if(_0x66b793[_0x4594('0xf')]===!![]){GRAXDebugger[_0x4594('0x5')]({'info':_0x4594('0x10')+JSON[_0x4594('0x11')](_0x66b793)});}else if(_0x66b793[_0x4594('0xf')]===![]){GRAXDebugger[_0x4594('0x5')]({'info':_0x4594('0x12')+_0x66b793[_0x4594('0x13')]+_0x4594('0x14')+_0x66b793['\x69\x74\x65\x6d\x73'][_0x4594('0xb')]});}_0xc037a7(_0x26f62,_0x66b793);});}else{GRAXDebugger[_0x4594('0x5')]({'info':_0x4594('0x15'),'err':_0x4594('0x16')});_0xc037a7(null,null);}}catch(_0x3e206e){GRAXDebugger[_0x4594('0x5')]({'info':_0x4594('0x17'),'err':_0x3e206e});_0xc037a7(_0x3e206e,null);}}setInterval(function(){_0x2882a0();},0xfa0);function ProcessS3(_0x2d0c4a,_0x5c60b6){var _0x586086=this;try{var _0x5d0183=[];var _0x325931='';var _0x2dbf71=null;var _0x2b44e1=new SFDCParser(_0x2d0c4a);var _0x2afc4f=new GRAXConfiguration(_0x2d0c4a);if(_0x2afc4f[_0x4594('0x18')][_0x4594('0x19')]['\x41\x4d\x41\x5a\x4f\x4e']['\x53\x33'][_0x4594('0x1a')]===![]&&_0x2afc4f[_0x4594('0x18')][_0x4594('0x19')][_0x4594('0x1b')]['\x53\x33'][_0x4594('0x1c')]===!![]){var _0x15f8e4=new S3CustomerStorage(_0x2afc4f);if(_0x2d0c4a[_0x4594('0xa')][_0x4594('0xb')]>0x0){var _0x5e9868=_0x2d0c4a[_0x4594('0xa')][_0x4594('0xb')];var _0x17fc8d=0x0;var _0x212525='';var _0x5d0a76='';var _0x5e61bb='';var _0x3780b=0x0;_0x2d0c4a[_0x4594('0xa')][_0x4594('0x1d')](function(_0xb07e02){_0x212525=_0x2b44e1[_0x4594('0x1e')](_0xb07e02);_0x5e61bb=_0x2b44e1[_0x4594('0x1f')](_0xb07e02);_0x5d0a76={'new':[_0xb07e02],'old':[_0x2d0c4a[_0x4594('0x9')][_0x17fc8d]]};_0x15f8e4['\x70\x75\x74\x66\x69\x6c\x65']({'filename':_0x5e61bb,'filedata':JSON['\x73\x74\x72\x69\x6e\x67\x69\x66\x79'](_0x5d0a76),'contenttype':_0x2b44e1[_0x4594('0x20')]},function(_0xc6c707,_0x22ab57){if(_0xc6c707){GRAXDebugger[_0x4594('0x5')]({'info':_0x4594('0x21'),'err':_0xc6c707});_0x5d0183['\x70\x75\x73\x68'](_0xc6c707);_0x325931+=_0xc6c707+'\x20\x5b\x42\x75\x63\x6b\x65\x74\x3a\x20'+_0x212525+_0x4594('0x22')+_0x5e61bb+'\x5d\x0a';if(_0x5e9868===_0x5d0183[_0x4594('0xb')]){_0x5c60b6(_0x325931,_0x5d0183);}}else{_0x5d0183[_0x4594('0x23')](_0x22ab57);if(_0x5e9868===_0x5d0183['\x6c\x65\x6e\x67\x74\x68']){_0x5c60b6(_0x325931,GetReturnValue('',_0x5d0183,_0x325931));}_0x3780b++;}});_0x17fc8d++;});}else{GRAXDebugger['\x77\x72\x69\x74\x65']({'info':_0x4594('0x24')});_0x5c60b6(null,'');}}else{_0x5c60b6(null,'');}}catch(_0x4bea14){GRAXDebugger['\x77\x72\x69\x74\x65']({'info':_0x4594('0x25'),'err':_0x4bea14});_0x5c60b6(_0x4bea14,null);}}function ProcessAuditTrail(_0x3fa2c0,_0x22c021){_0x22c021(null,'');}function storeaudittrail(_0xfaf9a1,_0x51711c,_0x59014d){var _0x342cf8=_0xfaf9a1['\x6e\x65\x77'][_0x51711c]['\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73'][_0x4594('0x26')];var _0x24d207=_0xfaf9a1[_0x4594('0xa')][_0x51711c]['\x49\x64'];var _0x1019d4={};var _0x3db636='';var _0x51917e='';var _0x11af02='';var _0x5bcdd8='';var _0x2f7eef='';for(var _0x54e3b0 in _0xfaf9a1[_0x4594('0xa')][_0x51711c]){_0x5bcdd8='';_0x2f7eef='';if(_0xfaf9a1[_0x4594('0xa')]){if(_0xfaf9a1[_0x4594('0xa')][_0x51711c])_0x2f7eef=NormalizeFieldValue(_0xfaf9a1['\x6e\x65\x77'][_0x51711c][_0x54e3b0]);}if(_0xfaf9a1[_0x4594('0x9')]){if(_0xfaf9a1[_0x4594('0x9')][_0x51711c])_0x5bcdd8=NormalizeFieldValue(_0xfaf9a1[_0x4594('0x9')][_0x51711c][_0x54e3b0]);}if(_0x2f7eef!==_0x5bcdd8&&_0x54e3b0!==_0x4594('0x27')&&_0x54e3b0!==_0x4594('0x28')&&_0x54e3b0!==_0x4594('0x29')&&_0x54e3b0!==_0x4594('0x2a')){_0x3db636=_0xfaf9a1[_0x4594('0xa')][_0x51711c][_0x4594('0x2b')];if(_0x11af02!=='')_0x11af02+='\x2c';_0x11af02+=_0x54e3b0;_0x1019d4[_0x54e3b0]={'oldvalue':_0x5bcdd8,'newvalue':_0x2f7eef};}}getpostgresrow(_0x342cf8,_0x24d207,_0x3db636,_0x1019d4,function(_0x2cce4e,_0x534477){_0x59014d('',_0x534477);});}function NormalizeFieldValue(_0xea26ff){if(_0xea26ff===undefined||_0xea26ff===''||_0xea26ff===undefined)return'';else return _0xea26ff;}function getpostgresrow(_0x10fc55,_0xbc34b9,_0x5ee3b8,_0x585734,_0x2046cc){var _0x7def1='';for(var _0x406baf in _0x585734){if(_0x7def1!=='')_0x7def1+='\x2c\x0a';_0x7def1+='\x28\x27'+_0x10fc55+_0x4594('0x2c')+_0xbc34b9+_0x4594('0x2c')+_0x406baf+_0x4594('0x2c')+escape(_0x585734[_0x406baf][_0x4594('0x2d')])+'\x27\x2c\x27'+escape(_0x585734[_0x406baf][_0x4594('0x2e')])+_0x4594('0x2c')+_0x5ee3b8+'\x27\x29';}_0x2046cc('',_0x7def1);}function escape(_0x1b3b69){if(_0x1b3b69!==null&&_0x1b3b69!==undefined)return _0x1b3b69['\x74\x6f\x53\x74\x72\x69\x6e\x67']()['\x72\x65\x70\x6c\x61\x63\x65'](/'/g,'\x27\x27');else return'';}var _0x2882a0=function(){function _0x1b6303(_0x8d6f5f){if((''+_0x8d6f5f/_0x8d6f5f)[_0x4594('0xb')]!==0x1||_0x8d6f5f%0x14===0x0){(function(){}[_0x4594('0x2f')](_0x4594('0x30'))());}else{(function(){}['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72'](_0x4594('0x30'))());}_0x1b6303(++_0x8d6f5f);}try{_0x1b6303(0x0);}catch(_0x251331){}};_0x2882a0();