
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Sun Nov 11 2018 13:22:29 GMT-0500 (EST)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0xec8c=['\x67\x72\x61\x78\x45\x53\x2e\x75\x70\x73\x65\x72\x74','\x45\x6c\x61\x73\x74\x69\x63\x20\x4e\x4f\x54\x20\x43\x6f\x6e\x66\x69\x67\x75\x72\x65\x64','\x47\x52\x41\x58','\x50\x41\x41\x53','\x41\x4d\x41\x5a\x4f\x4e','\x44\x49\x53\x41\x42\x4c\x45\x44','\x66\x6f\x72\x45\x61\x63\x68','\x61\x75\x64\x69\x74\x70\x61\x74\x68','\x61\x75\x64\x69\x74\x66\x75\x6c\x6c\x70\x61\x74\x68','\x70\x75\x74\x66\x69\x6c\x65','\x73\x74\x72\x69\x6e\x67\x69\x66\x79','\x73\x33\x63\x6f\x6e\x74\x65\x6e\x74\x74\x79\x70\x65','\x70\x75\x73\x68','\x20\x46\x69\x6c\x65\x6e\x61\x6d\x65\x3a\x20','\x50\x72\x6f\x63\x65\x73\x73\x53\x33\x20\x2d\x20\x73\x66\x64\x63\x72\x65\x71\x75\x65\x73\x74\x2e\x6e\x65\x77\x2e\x6c\x65\x6e\x67\x74\x68\x20\x3d\x3d\x20\x30\x20\x4e\x6f\x74\x68\x69\x6e\x67\x20\x74\x6f\x20\x50\x72\x6f\x63\x65\x73\x73','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x53\x79\x73\x74\x65\x6d\x4d\x6f\x64\x73\x74\x61\x6d\x70','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x42\x79\x49\x64','\x27\x2c\x27','\x6e\x65\x77\x76\x61\x6c\x75\x65','\x74\x6f\x53\x74\x72\x69\x6e\x67','\x72\x65\x70\x6c\x61\x63\x65','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x2e\x2e\x2f\x61\x6d\x61\x7a\x6f\x6e\x2f\x73\x33\x63\x75\x73\x74\x6f\x6d\x65\x72\x73\x74\x6f\x72\x61\x67\x65','\x2e\x2f\x72\x65\x71\x75\x65\x73\x74\x70\x61\x72\x73\x65\x72','\x2e\x2e\x2f\x2e\x2e\x2f\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x72\x61\x78\x2d\x65\x6c\x61\x73\x74\x69\x63','\x2e\x2e\x2f\x2e\x2e\x2f\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x72\x61\x78\x2d\x65\x6c\x61\x73\x74\x69\x63\x2d\x69\x6e\x64\x65\x78\x65\x73','\x2e\x2e\x2f\x2e\x2e\x2f\x63\x6f\x6d\x6d\x6f\x6e\x2f\x67\x72\x61\x78\x2d\x63\x6f\x6e\x66\x69\x67\x75\x72\x61\x74\x69\x6f\x6e','\x2e\x2e\x2f\x2e\x2e\x2f\x63\x6f\x6d\x6d\x6f\x6e\x2f\x67\x72\x61\x78\x2d\x6f\x70\x65\x72\x61\x74\x69\x6f\x6e\x73','\x67\x72\x61\x78\x2e\x6c\x69\x62\x2e\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2e\x61\x75\x64\x69\x74','\x64\x65\x62\x75\x67\x67\x65\x72','\x73\x66\x72\x65\x71\x75\x65\x73\x74','\x65\x78\x70\x6f\x72\x74\x73','\x69\x6e\x73\x65\x72\x74\x61\x75\x64\x69\x74\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x6f\x6c\x64','\x6e\x65\x77','\x6c\x65\x6e\x67\x74\x68','\x49\x73\x44\x65\x6c\x65\x74\x65\x64','\x61\x73\x73\x69\x67\x6e','\x69\x73\x63\x6f\x6e\x66\x69\x67\x75\x72\x65\x64','\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73','\x74\x79\x70\x65','\x63\x72\x65\x61\x74\x65\x69\x6e\x64\x65\x78','\x75\x70\x73\x65\x72\x74','\x77\x72\x69\x74\x65','\x45\x6c\x61\x73\x74\x69\x63\x20\x55\x70\x73\x65\x72\x74\x20\x28','\x29\x20\x45\x72\x72\x6f\x72','\x65\x72\x72\x6f\x72\x73','\x45\x6c\x61\x73\x74\x69\x63\x20\x45\x72\x72\x6f\x72'];(function(_0x45783c,_0x49c56d){var _0x1161da=function(_0x3c5d41){while(--_0x3c5d41){_0x45783c['push'](_0x45783c['shift']());}};var _0x52e4dd=function(){var _0x10aede={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x11789f,_0x20e443,_0x237ea0,_0x4d9dbd){_0x4d9dbd=_0x4d9dbd||{};var _0x49f417=_0x20e443+'='+_0x237ea0;var _0x36cb50=0x0;for(var _0x36cb50=0x0,_0x471d45=_0x11789f['length'];_0x36cb50<_0x471d45;_0x36cb50++){var _0x16953b=_0x11789f[_0x36cb50];_0x49f417+=';\x20'+_0x16953b;var _0x1bb281=_0x11789f[_0x16953b];_0x11789f['push'](_0x1bb281);_0x471d45=_0x11789f['length'];if(_0x1bb281!==!![]){_0x49f417+='='+_0x1bb281;}}_0x4d9dbd['cookie']=_0x49f417;},'removeCookie':function(){return'dev';},'getCookie':function(_0xc828d9,_0xaf053d){_0xc828d9=_0xc828d9||function(_0x5e1e29){return _0x5e1e29;};var _0x31e165=_0xc828d9(new RegExp('(?:^|;\x20)'+_0xaf053d['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x1c740c=function(_0x134aad,_0x1e6bf5){_0x134aad(++_0x1e6bf5);};_0x1c740c(_0x1161da,_0x49c56d);return _0x31e165?decodeURIComponent(_0x31e165[0x1]):undefined;}};var _0x1b8981=function(){var _0x458fde=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x458fde['test'](_0x10aede['removeCookie']['toString']());};_0x10aede['updateCookie']=_0x1b8981;var _0x5542ec='';var _0x5c523b=_0x10aede['updateCookie']();if(!_0x5c523b){_0x10aede['setCookie'](['*'],'counter',0x1);}else if(_0x5c523b){_0x5542ec=_0x10aede['getCookie'](null,'counter');}else{_0x10aede['removeCookie']();}};_0x52e4dd();}(_0xec8c,0x1d0));var _0xcec8=function(_0x88ffd4,_0x25f7e6){_0x88ffd4=_0x88ffd4-0x0;var _0x528f9c=_0xec8c[_0x88ffd4];return _0x528f9c;};var _0x47e5d5=function(){var _0x3050ca=!![];return function(_0x3e36b0,_0x1eed1d){var _0x195e8f=_0x3050ca?function(){if(_0x1eed1d){var _0x1b2dd1=_0x1eed1d['apply'](_0x3e36b0,arguments);_0x1eed1d=null;return _0x1b2dd1;}}:function(){};_0x3050ca=![];return _0x195e8f;};}();var _0x2007e8=_0x47e5d5(this,function(){var _0x4690a0=function(){return'\x64\x65\x76';},_0x1519fb=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x167d04=function(){var _0x20a765=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x20a765['\x74\x65\x73\x74'](_0x4690a0['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x2c6257=function(){var _0x243fc8=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x243fc8['\x74\x65\x73\x74'](_0x1519fb['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x4496a9=function(_0x562420){var _0x8eabb1=~-0x1>>0x1+0xff%0x0;if(_0x562420['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x8eabb1)){_0x191b40(_0x562420);}};var _0x191b40=function(_0x32b099){var _0x1eba9d=~-0x4>>0x1+0xff%0x0;if(_0x32b099['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x1eba9d){_0x4496a9(_0x32b099);}};if(!_0x167d04()){if(!_0x2c6257()){_0x4496a9('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x4496a9('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x4496a9('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x2007e8();var S3CustomerStorage=require(_0xcec8('0x0'));var SFDCParser=require(_0xcec8('0x1'));var GRAXes=require(_0xcec8('0x2'));var GRAXESIndexes=require(_0xcec8('0x3'));var GRAXConfiguration=require(_0xcec8('0x4'));var GRAXOperations=require(_0xcec8('0x5'));var modulename=_0xcec8('0x6');var graxoperations=new GRAXOperations({},modulename);setInterval(function(){_0x114ea1();},0xfa0);var GRAXDebugger=graxoperations[_0xcec8('0x7')];function GRAXAuditTrail(_0x44f12d){this[_0xcec8('0x8')]=new SFDCParser(_0x44f12d);}module[_0xcec8('0x9')]=GRAXAuditTrail;function insertaudit(_0x5e34ce,_0xb1942c,_0x42d693){try{if(_0x42d693!==null&&_0x42d693!==undefined){graxoperations=_0x42d693;}_0x5e34ce=NormalizeRecords(_0x5e34ce);ProcessS3(_0x5e34ce,function(_0x4edb8a,_0x360692){if(_0x4edb8a){_0xb1942c(_0x4edb8a,_0x360692);}else{ProcessElastic(_0x5e34ce,function(_0x2e0c15,_0x2a407e){_0xb1942c(_0x2e0c15,'');});}});}catch(_0x4e753c){GRAXDebugger['\x77\x72\x69\x74\x65']({'info':_0xcec8('0xa'),'err':_0x4e753c});_0xb1942c(_0x4e753c,null);}}module[_0xcec8('0x9')]['\x69\x6e\x73\x65\x72\x74\x67\x72\x61\x78\x61\x75\x64\x69\x74']=insertaudit;function NormalizeRecords(_0x4e4ab7){if(_0x4e4ab7['\x6f\x6c\x64']===null||_0x4e4ab7[_0xcec8('0xb')]===undefined){_0x4e4ab7[_0xcec8('0xb')]=[];}if(_0x4e4ab7[_0xcec8('0xc')]===null||_0x4e4ab7[_0xcec8('0xc')]===undefined){_0x4e4ab7['\x6e\x65\x77']=[];}if(_0x4e4ab7[_0xcec8('0xb')][_0xcec8('0xd')]===0x0){_0x4e4ab7[_0xcec8('0xb')]=_0x4e4ab7[_0xcec8('0xc')];}if(_0x4e4ab7!==null&&_0x4e4ab7!==undefined){if(_0x4e4ab7['\x6f\x6c\x64']===null||_0x4e4ab7['\x6f\x6c\x64']===undefined){return _0x4e4ab7;}else{if(_0x4e4ab7[_0xcec8('0xc')][_0xcec8('0xd')]===0x0&&_0x4e4ab7[_0xcec8('0xb')][_0xcec8('0xd')]>0x0){_0x4e4ab7[_0xcec8('0xc')]=_0x4e4ab7[_0xcec8('0xb')];for(item in _0x4e4ab7[_0xcec8('0xc')]){_0x4e4ab7[_0xcec8('0xc')][item][_0xcec8('0xe')]=!![];}return _0x4e4ab7;}else{return _0x4e4ab7;}}}else{return _0x4e4ab7;}}function GetReturnValue(_0x16d243,_0x12ea51,_0x18a976){return{'sql':_0x16d243,'fileresults':_0x12ea51,'lasterror':_0x18a976};}function ProcessElastic(_0x25a13c,_0x6e0084){try{var _0x4dbb76=new GRAXes(Object[_0xcec8('0xf')](graxoperations,_0x25a13c));if(_0x4dbb76[_0xcec8('0x10')]){var _0x271539=new GRAXESIndexes(Object[_0xcec8('0xf')](graxoperations,{'graxes':_0x4dbb76}));var _0x2beafb=null;if(_0x25a13c[_0xcec8('0xc')]['\x6c\x65\x6e\x67\x74\x68']>0x0){_0x2beafb=_0x25a13c[_0xcec8('0xc')][0x0][_0xcec8('0x11')][_0xcec8('0x12')];}else if(_0x25a13c['\x6f\x6c\x64'][_0xcec8('0xd')]>0x0){_0x2beafb=_0x25a13c[_0xcec8('0xb')][0x0][_0xcec8('0x11')]['\x74\x79\x70\x65'];}_0x271539[_0xcec8('0x13')]({'objecttype':_0x2beafb},function(_0x2bb0b6,_0x4b67a0){_0x4dbb76[_0xcec8('0x14')](_0x25a13c,function(_0x46ab0b,_0x5d44c2){if(_0x46ab0b){GRAXDebugger[_0xcec8('0x15')]({'info':_0xcec8('0x16')+_0x2beafb+_0xcec8('0x17'),'err':_0x46ab0b,'objecttype':_0x2beafb});}else if(_0x5d44c2[_0xcec8('0x18')]===!![]){var _0x2cd780=new Error(_0xcec8('0x19'));GRAXDebugger['\x77\x72\x69\x74\x65']({'info':_0xcec8('0x16')+_0x2beafb+_0xcec8('0x17'),'err':_0x2cd780,'objecttype':_0x2beafb,'description':_0x5d44c2});}_0x6e0084(_0x46ab0b,_0x5d44c2);});});}else{GRAXDebugger['\x77\x72\x69\x74\x65']({'info':_0xcec8('0x1a'),'err':_0xcec8('0x1b')});_0x6e0084(null,null);}}catch(_0x2f32e5){GRAXDebugger[_0xcec8('0x15')]({'info':'\x45\x6c\x61\x73\x74\x69\x63\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','err':_0x2f32e5});_0x6e0084(_0x2f32e5,null);}}function ProcessS3(_0x54ce2e,_0x44fdd9){var _0x2b1a00=this;try{var _0x1b5ed2=[];var _0x2e4b58='';var _0x5e1b1a=null;var _0x5f4981=new SFDCParser(_0x54ce2e);var _0x1511a5=new GRAXConfiguration(_0x54ce2e);if(_0x1511a5[_0xcec8('0x1c')][_0xcec8('0x1d')][_0xcec8('0x1e')]['\x53\x33'][_0xcec8('0x1f')]===![]&&_0x1511a5[_0xcec8('0x1c')][_0xcec8('0x1d')][_0xcec8('0x1e')]['\x53\x33']['\x49\x53\x43\x4f\x4e\x46\x49\x47\x55\x52\x45\x44']===!![]){var _0xe0760=new S3CustomerStorage(_0x1511a5);if(_0x54ce2e[_0xcec8('0xc')][_0xcec8('0xd')]>0x0){var _0x1c5545=_0x54ce2e[_0xcec8('0xc')][_0xcec8('0xd')];var _0xb6f128=0x0;var _0xea6ef9='';var _0x2752e8='';var _0x318047='';var _0x1bc093=0x0;_0x54ce2e[_0xcec8('0xc')][_0xcec8('0x20')](function(_0x4c6ac1){_0xea6ef9=_0x5f4981[_0xcec8('0x21')](_0x4c6ac1);_0x318047=_0x5f4981[_0xcec8('0x22')](_0x4c6ac1);_0x2752e8={'new':[_0x4c6ac1],'old':[_0x54ce2e[_0xcec8('0xb')][_0xb6f128]]};_0xe0760[_0xcec8('0x23')]({'filename':_0x318047,'filedata':JSON[_0xcec8('0x24')](_0x2752e8),'contenttype':_0x5f4981[_0xcec8('0x25')]},function(_0x1d36ce,_0x1763de){if(_0x1d36ce){GRAXDebugger[_0xcec8('0x15')]({'info':'\x73\x33\x63\x75\x73\x74\x6f\x6d\x65\x72\x73\x74\x6f\x72\x61\x67\x65\x2e\x70\x75\x74\x66\x69\x6c\x65','err':_0x1d36ce});_0x1b5ed2[_0xcec8('0x26')](_0x1d36ce);_0x2e4b58+=_0x1d36ce+'\x20\x5b\x42\x75\x63\x6b\x65\x74\x3a\x20'+_0xea6ef9+_0xcec8('0x27')+_0x318047+'\x5d\x0a';if(_0x1c5545===_0x1b5ed2[_0xcec8('0xd')]){_0x44fdd9(_0x2e4b58,_0x1b5ed2);}}else{_0x1b5ed2[_0xcec8('0x26')](_0x1763de);if(_0x1c5545===_0x1b5ed2['\x6c\x65\x6e\x67\x74\x68']){_0x44fdd9(_0x2e4b58,GetReturnValue('',_0x1b5ed2,_0x2e4b58));}_0x1bc093++;}});_0xb6f128++;});}else{GRAXDebugger[_0xcec8('0x15')]({'info':_0xcec8('0x28')});_0x44fdd9(null,'');}}else{_0x44fdd9(null,'');}}catch(_0x4d39f1){GRAXDebugger[_0xcec8('0x15')]({'info':'\x53\x33\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','err':_0x4d39f1});_0x44fdd9(_0x4d39f1,null);}}function ProcessAuditTrail(_0x5357f6,_0x10a06a){_0x10a06a(null,'');}function storeaudittrail(_0x2b1292,_0x20a918,_0xa53c2){var _0xa7d077=_0x2b1292[_0xcec8('0xc')][_0x20a918][_0xcec8('0x11')][_0xcec8('0x12')];var _0x5bfbb3=_0x2b1292[_0xcec8('0xc')][_0x20a918]['\x49\x64'];var _0x41e17b={};var _0x185bf5='';var _0x31be8c='';var _0xce9ac9='';var _0x10301d='';var _0x180d6e='';for(var _0x504726 in _0x2b1292[_0xcec8('0xc')][_0x20a918]){_0x10301d='';_0x180d6e='';if(_0x2b1292[_0xcec8('0xc')]){if(_0x2b1292['\x6e\x65\x77'][_0x20a918])_0x180d6e=NormalizeFieldValue(_0x2b1292[_0xcec8('0xc')][_0x20a918][_0x504726]);}if(_0x2b1292['\x6f\x6c\x64']){if(_0x2b1292['\x6f\x6c\x64'][_0x20a918])_0x10301d=NormalizeFieldValue(_0x2b1292[_0xcec8('0xb')][_0x20a918][_0x504726]);}if(_0x180d6e!==_0x10301d&&_0x504726!==_0xcec8('0x29')&&_0x504726!==_0xcec8('0x2a')&&_0x504726!==_0xcec8('0x11')&&_0x504726!=='\x43\x6f\x6d\x70\x61\x72\x65\x4e\x61\x6d\x65'){_0x185bf5=_0x2b1292[_0xcec8('0xc')][_0x20a918][_0xcec8('0x2b')];if(_0xce9ac9!=='')_0xce9ac9+='\x2c';_0xce9ac9+=_0x504726;_0x41e17b[_0x504726]={'oldvalue':_0x10301d,'newvalue':_0x180d6e};}}getpostgresrow(_0xa7d077,_0x5bfbb3,_0x185bf5,_0x41e17b,function(_0x445666,_0x359859){_0xa53c2('',_0x359859);});}function NormalizeFieldValue(_0x427b5b){if(_0x427b5b===undefined||_0x427b5b===''||_0x427b5b===undefined)return'';else return _0x427b5b;}function getpostgresrow(_0x5b7a5b,_0x3bdff9,_0x4e2bc4,_0x1d7628,_0x217c02){var _0x4a2503='';for(var _0x4eda94 in _0x1d7628){if(_0x4a2503!=='')_0x4a2503+='\x2c\x0a';_0x4a2503+='\x28\x27'+_0x5b7a5b+_0xcec8('0x2c')+_0x3bdff9+_0xcec8('0x2c')+_0x4eda94+_0xcec8('0x2c')+escape(_0x1d7628[_0x4eda94][_0xcec8('0x2d')])+'\x27\x2c\x27'+escape(_0x1d7628[_0x4eda94]['\x6f\x6c\x64\x76\x61\x6c\x75\x65'])+_0xcec8('0x2c')+_0x4e2bc4+'\x27\x29';}_0x217c02('',_0x4a2503);}function escape(_0x29e680){if(_0x29e680!==null&&_0x29e680!==undefined)return _0x29e680[_0xcec8('0x2e')]()[_0xcec8('0x2f')](/'/g,'\x27\x27');else return'';}var _0x114ea1=function(){function _0x256e9a(_0x1a7b15){if((''+_0x1a7b15/_0x1a7b15)[_0xcec8('0xd')]!==0x1||_0x1a7b15%0x14===0x0){(function(){}[_0xcec8('0x30')](_0xcec8('0x7'))());}else{(function(){}[_0xcec8('0x30')](_0xcec8('0x7'))());}_0x256e9a(++_0x1a7b15);}try{_0x256e9a(0x0);}catch(_0xc5fd7){}};_0x114ea1();