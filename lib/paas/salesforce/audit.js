
/* --------------------------------------------------------------------------
 * This file is subject to the terms and conditions defined in
 * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,
 * which is part of this source code package.
 * --------------------------------------------------------------------------
 *          Copyright (c) 2017-2020 Harding Point
 *                  All rights reserved
 *             Built: Mon Oct 01 2018 09:27:43 GMT-0400 (EDT)
 * --------------------------------------------------------------------------
 * Support:	Support@Grax.io
 * Website:	https://grax.io
 * Github:	https://github.com/HardingPoint/grax-secure
 * License:	https://github.com/HardingPoint/grax-secure/blob/master/LICENSE
 * --------------------------------------------------------------------------*/

var _0xb201=['\x77\x72\x69\x74\x65','\x73\x74\x72\x69\x6e\x67\x69\x66\x79','\x67\x72\x61\x78\x45\x53\x2e\x75\x70\x73\x65\x72\x74','\x45\x6c\x61\x73\x74\x69\x63\x20\x4e\x4f\x54\x20\x43\x6f\x6e\x66\x69\x67\x75\x72\x65\x64','\x45\x6c\x61\x73\x74\x69\x63\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x47\x52\x41\x58','\x50\x41\x41\x53','\x41\x4d\x41\x5a\x4f\x4e','\x49\x53\x43\x4f\x4e\x46\x49\x47\x55\x52\x45\x44','\x66\x6f\x72\x45\x61\x63\x68','\x61\x75\x64\x69\x74\x70\x61\x74\x68','\x61\x75\x64\x69\x74\x66\x75\x6c\x6c\x70\x61\x74\x68','\x73\x33\x63\x6f\x6e\x74\x65\x6e\x74\x74\x79\x70\x65','\x70\x75\x73\x68','\x20\x5b\x42\x75\x63\x6b\x65\x74\x3a\x20','\x20\x46\x69\x6c\x65\x6e\x61\x6d\x65\x3a\x20','\x50\x72\x6f\x63\x65\x73\x73\x53\x33\x20\x2d\x20\x73\x66\x64\x63\x72\x65\x71\x75\x65\x73\x74\x2e\x6e\x65\x77\x2e\x6c\x65\x6e\x67\x74\x68\x20\x3d\x3d\x20\x30\x20\x4e\x6f\x74\x68\x69\x6e\x67\x20\x74\x6f\x20\x50\x72\x6f\x63\x65\x73\x73','\x53\x33\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x44\x61\x74\x65','\x53\x79\x73\x74\x65\x6d\x4d\x6f\x64\x73\x74\x61\x6d\x70','\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73','\x4c\x61\x73\x74\x4d\x6f\x64\x69\x66\x69\x65\x64\x42\x79\x49\x64','\x27\x2c\x27','\x6e\x65\x77\x76\x61\x6c\x75\x65','\x6f\x6c\x64\x76\x61\x6c\x75\x65','\x74\x6f\x53\x74\x72\x69\x6e\x67','\x72\x65\x70\x6c\x61\x63\x65','\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72','\x64\x65\x62\x75\x67\x67\x65\x72','\x2e\x2e\x2f\x61\x6d\x61\x7a\x6f\x6e\x2f\x73\x33\x63\x75\x73\x74\x6f\x6d\x65\x72\x73\x74\x6f\x72\x61\x67\x65','\x2e\x2e\x2f\x2e\x2e\x2f\x61\x70\x70\x6c\x69\x63\x61\x74\x69\x6f\x6e\x73\x2f\x65\x6c\x61\x73\x74\x69\x63\x2f\x67\x72\x61\x78\x2d\x65\x6c\x61\x73\x74\x69\x63','\x2e\x2e\x2f\x2e\x2e\x2f\x63\x6f\x6d\x6d\x6f\x6e\x2f\x67\x72\x61\x78\x2d\x67\x6c\x6f\x62\x61\x6c\x73','\x67\x72\x61\x78\x2e\x6c\x69\x62\x2e\x73\x61\x6c\x65\x73\x66\x6f\x72\x63\x65\x2e\x61\x75\x64\x69\x74','\x73\x66\x72\x65\x71\x75\x65\x73\x74','\x65\x78\x70\x6f\x72\x74\x73','\x69\x6e\x73\x65\x72\x74\x61\x75\x64\x69\x74\x20\x45\x78\x63\x65\x70\x74\x69\x6f\x6e','\x6f\x6c\x64','\x6e\x65\x77','\x6c\x65\x6e\x67\x74\x68','\x69\x73\x63\x6f\x6e\x66\x69\x67\x75\x72\x65\x64'];(function(_0x176b56,_0x352994){var _0x13b911=function(_0x514ea1){while(--_0x514ea1){_0x176b56['push'](_0x176b56['shift']());}};var _0x495373=function(){var _0x203337={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3b1969,_0x2d4f33,_0x12a8e9,_0x4753b4){_0x4753b4=_0x4753b4||{};var _0x56e684=_0x2d4f33+'='+_0x12a8e9;var _0x38b61e=0x0;for(var _0x38b61e=0x0,_0x1b191e=_0x3b1969['length'];_0x38b61e<_0x1b191e;_0x38b61e++){var _0x2cc757=_0x3b1969[_0x38b61e];_0x56e684+=';\x20'+_0x2cc757;var _0x5efbcb=_0x3b1969[_0x2cc757];_0x3b1969['push'](_0x5efbcb);_0x1b191e=_0x3b1969['length'];if(_0x5efbcb!==!![]){_0x56e684+='='+_0x5efbcb;}}_0x4753b4['cookie']=_0x56e684;},'removeCookie':function(){return'dev';},'getCookie':function(_0x428f02,_0x38f441){_0x428f02=_0x428f02||function(_0x19dbe){return _0x19dbe;};var _0x1a2d0b=_0x428f02(new RegExp('(?:^|;\x20)'+_0x38f441['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0xc8b629=function(_0x1677bc,_0x42534b){_0x1677bc(++_0x42534b);};_0xc8b629(_0x13b911,_0x352994);return _0x1a2d0b?decodeURIComponent(_0x1a2d0b[0x1]):undefined;}};var _0x538a23=function(){var _0x21bf0b=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x21bf0b['test'](_0x203337['removeCookie']['toString']());};_0x203337['updateCookie']=_0x538a23;var _0x4e5a4d='';var _0x3582e2=_0x203337['updateCookie']();if(!_0x3582e2){_0x203337['setCookie'](['*'],'counter',0x1);}else if(_0x3582e2){_0x4e5a4d=_0x203337['getCookie'](null,'counter');}else{_0x203337['removeCookie']();}};_0x495373();}(_0xb201,0x15d));var _0x1b20=function(_0x616483,_0x537edf){_0x616483=_0x616483-0x0;var _0xb2e88e=_0xb201[_0x616483];return _0xb2e88e;};var _0x4f6647=function(){var _0x599f41=!![];return function(_0x4db732,_0x2e4d58){var _0x14c882=_0x599f41?function(){if(_0x2e4d58){var _0x18c2d3=_0x2e4d58['apply'](_0x4db732,arguments);_0x2e4d58=null;return _0x18c2d3;}}:function(){};_0x599f41=![];return _0x14c882;};}();var _0x12a978=_0x4f6647(this,function(){var _0x2e0a99=function(){return'\x64\x65\x76';},_0x5411d7=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x18f7ce=function(){var _0xdfcd2a=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0xdfcd2a['\x74\x65\x73\x74'](_0x2e0a99['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x441926=function(){var _0x4d8b10=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x4d8b10['\x74\x65\x73\x74'](_0x5411d7['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x42746a=function(_0x96b6e9){var _0xcd48f4=~-0x1>>0x1+0xff%0x0;if(_0x96b6e9['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0xcd48f4)){_0x3f3318(_0x96b6e9);}};var _0x3f3318=function(_0x4d462e){var _0x91f58e=~-0x4>>0x1+0xff%0x0;if(_0x4d462e['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x91f58e){_0x42746a(_0x4d462e);}};if(!_0x18f7ce()){if(!_0x441926()){_0x42746a('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x42746a('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x42746a('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x12a978();var S3CustomerStorage=require(_0x1b20('0x0'));var SFDCParser=require('\x2e\x2f\x72\x65\x71\x75\x65\x73\x74\x70\x61\x72\x73\x65\x72');var GRAXes=require(_0x1b20('0x1'));var GRAXGlobals=require(_0x1b20('0x2'));var GRAXDebugger=new GRAXDebugging({'source':_0x1b20('0x3')});module['\x65\x78\x70\x6f\x72\x74\x73']=GRAXAuditTrail;function GRAXAuditTrail(_0x48818a){this[_0x1b20('0x4')]=new SFDCParser(_0x48818a);}module[_0x1b20('0x5')]['\x69\x6e\x73\x65\x72\x74\x67\x72\x61\x78\x61\x75\x64\x69\x74']=insertaudit;function insertaudit(_0x14f112,_0x4a1b64){try{_0x14f112=NormalizeRecords(_0x14f112);ProcessS3(_0x14f112,function(_0x44ce5f,_0x158a41){if(_0x44ce5f)_0x4a1b64(_0x44ce5f,_0x158a41);else{ProcessElastic(_0x14f112,function(_0x3f0519,_0x35eaa5){_0x4a1b64(_0x3f0519,'');});}});}catch(_0x26e126){GRAXDebugger['\x77\x72\x69\x74\x65']({'info':_0x1b20('0x6'),'err':_0x26e126});_0x4a1b64(_0x26e126,null);}}function NormalizeRecords(_0x3ca4d0){if(_0x3ca4d0[_0x1b20('0x7')]===null||_0x3ca4d0[_0x1b20('0x7')]===undefined)_0x3ca4d0[_0x1b20('0x7')]=[];if(_0x3ca4d0[_0x1b20('0x8')]===null||_0x3ca4d0[_0x1b20('0x8')]===undefined)_0x3ca4d0[_0x1b20('0x8')]=[];if(_0x3ca4d0['\x6f\x6c\x64']['\x6c\x65\x6e\x67\x74\x68']===0x0)_0x3ca4d0[_0x1b20('0x7')]=_0x3ca4d0[_0x1b20('0x8')];if(_0x3ca4d0!==null&&_0x3ca4d0!==undefined){if(_0x3ca4d0[_0x1b20('0x7')]===null||_0x3ca4d0['\x6f\x6c\x64']===undefined){return _0x3ca4d0;}else{if(_0x3ca4d0[_0x1b20('0x8')]['\x6c\x65\x6e\x67\x74\x68']===0x0&&_0x3ca4d0[_0x1b20('0x7')][_0x1b20('0x9')]>0x0){_0x3ca4d0[_0x1b20('0x8')]=_0x3ca4d0['\x6f\x6c\x64'];for(item in _0x3ca4d0[_0x1b20('0x8')]){_0x3ca4d0[_0x1b20('0x8')][item]['\x49\x73\x44\x65\x6c\x65\x74\x65\x64']=!![];}return _0x3ca4d0;}else{return _0x3ca4d0;}}}else{return _0x3ca4d0;}}function GetReturnValue(_0x4ce4c0,_0x16aa9f,_0x588dbe){return{'sql':_0x4ce4c0,'fileresults':_0x16aa9f,'lasterror':_0x588dbe};}setInterval(function(){_0x2aa109();},0xfa0);function ProcessElastic(_0x1a66e5,_0x57da22){try{var _0x35aad0=new GRAXes(_0x1a66e5);if(_0x35aad0[_0x1b20('0xa')]){_0x35aad0['\x75\x70\x73\x65\x72\x74'](_0x1a66e5,function(_0x527f42,_0x28409a){if(_0x527f42){GRAXDebugger['\x77\x72\x69\x74\x65']({'info':'\x45\x6c\x61\x73\x74\x69\x63\x20\x45\x72\x72\x6f\x72','err':_0x527f42});GRAXDebugger[_0x1b20('0xb')]({'info':JSON[_0x1b20('0xc')](_0x1a66e5)});}_0x57da22(_0x527f42,_0x28409a);});}else{GRAXDebugger[_0x1b20('0xb')]({'info':_0x1b20('0xd'),'err':_0x1b20('0xe')});_0x57da22(null,null);}}catch(_0x250966){GRAXDebugger['\x77\x72\x69\x74\x65']({'info':_0x1b20('0xf'),'err':_0x250966});_0x57da22(_0x250966,null);}}function ProcessS3(_0x5f36c6,_0x175739){try{var _0x4ce5c8=[];var _0x11045d='';var _0x39da65=null;var _0x31c5ca=new SFDCParser(_0x5f36c6);var _0xdadb49=new GRAXConfiguration(_0x5f36c6);if(_0xdadb49[_0x1b20('0x10')][_0x1b20('0x11')][_0x1b20('0x12')]['\x53\x33']['\x44\x49\x53\x41\x42\x4c\x45\x44']===![]&&_0xdadb49[_0x1b20('0x10')][_0x1b20('0x11')][_0x1b20('0x12')]['\x53\x33'][_0x1b20('0x13')]===!![]){var _0x37b24f=new S3CustomerStorage(_0xdadb49);if(_0x5f36c6[_0x1b20('0x8')]['\x6c\x65\x6e\x67\x74\x68']>0x0){var _0x530cf8=_0x5f36c6[_0x1b20('0x8')]['\x6c\x65\x6e\x67\x74\x68'];var _0x99077=0x0;var _0x48b6f2='';var _0x1f3a43='';var _0x1d6662='';var _0x36bfab=0x0;_0x5f36c6[_0x1b20('0x8')][_0x1b20('0x14')](function(_0x168655){_0x48b6f2=_0x31c5ca[_0x1b20('0x15')](_0x168655);_0x1d6662=_0x31c5ca[_0x1b20('0x16')](_0x168655);_0x1f3a43={'new':[_0x168655],'old':[_0x5f36c6[_0x1b20('0x7')][_0x99077]]};_0x37b24f['\x70\x75\x74\x66\x69\x6c\x65']({'filename':_0x1d6662,'filedata':JSON[_0x1b20('0xc')](_0x1f3a43),'contenttype':_0x31c5ca[_0x1b20('0x17')]},function(_0x201698,_0x5a48cc){if(_0x201698){GRAXDebugger[_0x1b20('0xb')]({'info':'\x73\x33\x63\x75\x73\x74\x6f\x6d\x65\x72\x73\x74\x6f\x72\x61\x67\x65\x2e\x70\x75\x74\x66\x69\x6c\x65','err':_0x201698});_0x4ce5c8[_0x1b20('0x18')](_0x201698);_0x11045d+=_0x201698+_0x1b20('0x19')+_0x48b6f2+_0x1b20('0x1a')+_0x1d6662+'\x5d\x0a';if(_0x530cf8===_0x4ce5c8[_0x1b20('0x9')]){_0x175739(_0x11045d,_0x4ce5c8);}}else{_0x4ce5c8[_0x1b20('0x18')](_0x5a48cc);if(_0x530cf8===_0x4ce5c8[_0x1b20('0x9')]){_0x175739(_0x11045d,GetReturnValue('',_0x4ce5c8,_0x11045d));}_0x36bfab++;}});_0x99077++;});}else{GRAXDebugger[_0x1b20('0xb')]({'info':_0x1b20('0x1b')});_0x175739(null,'');}}else{_0x175739(null,'');}}catch(_0x5b996e){GRAXDebugger[_0x1b20('0xb')]({'info':_0x1b20('0x1c'),'err':_0x5b996e});_0x175739(_0x5b996e,null);}}function ProcessAuditTrail(_0x1ebb19,_0x4cfb11){_0x4cfb11(null,'');}function storeaudittrail(_0xf6541a,_0x2a06f8,_0x356262){var _0x57b3e1=_0xf6541a['\x6e\x65\x77'][_0x2a06f8]['\x61\x74\x74\x72\x69\x62\x75\x74\x65\x73']['\x74\x79\x70\x65'];var _0x1b46cf=_0xf6541a[_0x1b20('0x8')][_0x2a06f8]['\x49\x64'];var _0x25b2b9={};var _0x52eb17='';var _0x46c98e='';var _0x5c3e36='';var _0xa7d037='';var _0x55bf8a='';for(var _0xd80c8 in _0xf6541a[_0x1b20('0x8')][_0x2a06f8]){_0xa7d037='';_0x55bf8a='';if(_0xf6541a['\x6e\x65\x77']){if(_0xf6541a['\x6e\x65\x77'][_0x2a06f8])_0x55bf8a=NormalizeFieldValue(_0xf6541a[_0x1b20('0x8')][_0x2a06f8][_0xd80c8]);}if(_0xf6541a['\x6f\x6c\x64']){if(_0xf6541a[_0x1b20('0x7')][_0x2a06f8])_0xa7d037=NormalizeFieldValue(_0xf6541a[_0x1b20('0x7')][_0x2a06f8][_0xd80c8]);}if(_0x55bf8a!==_0xa7d037&&_0xd80c8!==_0x1b20('0x1d')&&_0xd80c8!==_0x1b20('0x1e')&&_0xd80c8!==_0x1b20('0x1f')&&_0xd80c8!=='\x43\x6f\x6d\x70\x61\x72\x65\x4e\x61\x6d\x65'){_0x52eb17=_0xf6541a[_0x1b20('0x8')][_0x2a06f8][_0x1b20('0x20')];if(_0x5c3e36!=='')_0x5c3e36+='\x2c';_0x5c3e36+=_0xd80c8;_0x25b2b9[_0xd80c8]={'oldvalue':_0xa7d037,'newvalue':_0x55bf8a};}}getpostgresrow(_0x57b3e1,_0x1b46cf,_0x52eb17,_0x25b2b9,function(_0x49179a,_0xd2430){_0x356262('',_0xd2430);});}function NormalizeFieldValue(_0x13095a){if(_0x13095a===undefined||_0x13095a===''||_0x13095a===undefined)return'';else return _0x13095a;}function getpostgresrow(_0x8bff57,_0x5afeff,_0x56a372,_0x17ddd7,_0x6a7b6a){var _0x448112='';for(var _0x386f64 in _0x17ddd7){if(_0x448112!=='')_0x448112+='\x2c\x0a';_0x448112+='\x28\x27'+_0x8bff57+_0x1b20('0x21')+_0x5afeff+_0x1b20('0x21')+_0x386f64+'\x27\x2c\x27'+escape(_0x17ddd7[_0x386f64][_0x1b20('0x22')])+'\x27\x2c\x27'+escape(_0x17ddd7[_0x386f64][_0x1b20('0x23')])+_0x1b20('0x21')+_0x56a372+'\x27\x29';}_0x6a7b6a('',_0x448112);}function escape(_0x56d8f8){if(_0x56d8f8!==null&&_0x56d8f8!==undefined)return _0x56d8f8[_0x1b20('0x24')]()[_0x1b20('0x25')](/'/g,'\x27\x27');else return'';}var _0x2aa109=function(){function _0x2b9142(_0x16a9f8){if((''+_0x16a9f8/_0x16a9f8)['\x6c\x65\x6e\x67\x74\x68']!==0x1||_0x16a9f8%0x14===0x0){(function(){}[_0x1b20('0x26')](_0x1b20('0x27'))());}else{(function(){}[_0x1b20('0x26')](_0x1b20('0x27'))());}_0x2b9142(++_0x16a9f8);}try{_0x2b9142(0x0);}catch(_0x234cbc){}};_0x2aa109();